{"version":3,"sources":["components/common/YearSelect.jsx","components/home/HomeCard.jsx","components/common/Input.jsx","components/common/MutableList.jsx","helpers/createQuery.js","hooks/useUser.js","providers/AxiosProvider.jsx","hooks/useSubjects.js","providers/ModalProvider.jsx","hooks/useModal.js","components/subject/SubjectsCard.jsx","hooks/useTeachers.js","helpers/formatRole.js","components/teacher/TeachersCard.jsx","hooks/useGroups.js","components/group/GroupsCard.jsx","helpers/getDefaultValue.js","components/common/Form.jsx","components/common/Select.jsx","components/group/GroupSelect.jsx","components/subject/SubjectSelect.jsx","components/common/MonthSelect.jsx","components/sheet/JournalCard.jsx","hooks/useStudents.js","components/student/StudentsCard.jsx","hooks/useSheets.js","helpers/getMonth.js","components/sheet/SheetsCard.jsx","components/common/Modal.jsx","helpers/genId.js","components/subject/CreateSubject.jsx","components/common/MultiSelect.jsx","components/subject/SubjectMultiSelect.jsx","components/teacher/TeacherSelect.jsx","components/group/CreateGroup.jsx","components/teacher/RoleMultiSelect.jsx","components/teacher/CreateTeacher.jsx","components/student/CreateStudent.jsx","components/sheet/CreateSheet.jsx","helpers/constants.js","pages/private/HomePage.jsx","components/sheet/MarkSelect.jsx","pages/public/SheetPage.jsx","pages/public/LoginPage.jsx","Routes.jsx","App.jsx","index.jsx"],"names":["HomeCard","label","children","className","Input","onChange","props","classnames","e","target","name","value","MutableList","items","onEdit","onAdd","collectionName","refetch","useState","search","setSearch","filteredItems","useMemo","filter","RegExp","test","onClick","map","confirm","axios","delete","process","then","catch","err","alert","onDelete","createQuery","query","values","join","useUser","useContext","UserContext","me","setMe","push","useHistory","login","password","queryString","stringify","data","user","id","localStorage","setItem","authorize","useCallback","a","getItem","split","AxiosContext","createContext","AxiosProvider","useAxios","groups","refetchGroups","subjects","refetchSubjects","teachers","refetchTeachers","students","refetchStudents","role","includes","sheets","refetchSheets","Provider","useSubjects","ModalContext","ModalProvider","activeModal","setActiveModal","context","setContext","openModal","modalName","closeModal","useModal","open","openContext","close","SubjectsCard","createModalName","useTeachers","rolesDictionary","student","teacher","curator","admin","formatRole","TeachersCard","roles","useGroups","GroupsCard","curatorName","find","getDefaultValue","type","Form","fields","cancel","cancelLabel","submitLabel","onSubmit","actionClassName","initialValues","form","setForm","handleSubmit","JSON","handleChange","prev","preventDefault","component","required","condition","cloneElement","key","Select","options","addLabel","setOpen","selectRef","useRef","activeOptionValue","activeOptionLabel","optionValue","handleBlur","classList","contains","handleClose","toggle","useEffect","deselect","document","addEventListener","removeEventListener","ref","onMouseDown","handleSelect","GroupSelect","SubjectSelect","MonthSelect","i","Date","getFullYear","toString","YearSelect","JournalCard","group","year","month","subject","date","useStudents","StudentsCard","groupIds","groupId","groupNames","length","useSheets","getMonth","groupName","subjectName","subjectId","parseInt","Modal","center","handleClick","handleKeyDown","clickEvent","keyDownEvent","Boolean","ModalContainer","createPortal","body","genId","prefix","Math","random","substr","placeholder","CreateSubject","setInitialValues","fetchGroup","get","patch","post","MultiSelect","limit","selectedOptions","inputValue","newSelected","splice","indexOf","disabled","some","active","SubjectMultiSelect","TeacherSelect","filtered","teacherRole","CreateGroup","RoleMultiSelect","CreateTeacher","fetchTeacher","CreateStudent","fetchStudent","fetchSheet","MarksEnum","RolesEnum","DAYS","HomePage","CardsToShow","SheetsCard","CreateSheet","MarkSelect","selectedMark","setSelectedMark","error","SheetPage","notFound","setNotFound","sheet","setSheet","setStudents","useLocation","parse","role_like","currentTeacher","mutationAllowed","undefined","day","mark","marks","mutateMark","markValue","LoginPage","username","setUsername","setPassword","Routes","exact","path","App","ReactDOM","render","getElementById"],"mappings":"mJAMA,I,yDCKeA,EATE,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACzB,OACE,sBAAKC,UAAU,YAAf,UACE,qBAAKA,UAAU,cAAf,SAA8BF,IAC9B,qBAAKE,UAAU,eAAf,SAA+BD,Q,+CCYtBE,EAfD,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,SAAUJ,EAAsB,EAAtBA,MAAUK,EAAY,oCAO/C,OACE,sBAAKH,UAAWI,IAAW,QAASD,EAAMH,WAA1C,UACGF,GAAS,qBAAKE,UAAU,cAAf,SAA8BF,IACxC,iDAAWK,GAAX,IAAkBH,UAAU,cAAcE,SATzB,SAAAG,GAAM,IAAD,EACAA,EAAEC,OAAlBC,EADgB,EAChBA,KAAMC,EADU,EACVA,MAEd,OAAON,EAAS,CAAEK,OAAMC,kBC4CbC,EA9CK,SAAC,GAAuD,IAAD,EAApDC,EAAoD,EAApDA,MAAOC,EAA6C,EAA7CA,OAAQC,EAAqC,EAArCA,MAAOC,EAA8B,EAA9BA,eAAgBC,EAAc,EAAdA,QAAc,EAC7CC,mBAAS,IADoC,mBAClEC,EADkE,KAC1DC,EAD0D,KAGnEC,EAAgBC,mBAAQ,yBAAMT,QAAN,IAAMA,OAAN,EAAMA,EAAOU,QAAO,gBAAGtB,EAAH,EAAGA,MAAH,OAAe,IAAIuB,OAAOL,EAAQ,MAAMM,KAAKxB,QAAS,CACtGkB,EACAN,IAcF,OACE,sBAAKV,UAAU,eAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,SAAf,SACE,cAAC,EAAD,CAAOF,MAAM,iCAAQU,MAAOQ,EAAQd,SAAU,gBAAGM,EAAH,EAAGA,MAAH,OAAeS,EAAUT,QAEzE,wBAAQe,QAASX,EAAOZ,UAAU,cAAlC,4GALJ,UASIgB,EAASE,EAAgBR,SAT7B,aASG,EAAkCc,KAAI,gBAAG1B,EAAH,EAAGA,MAAOU,EAAV,EAAUA,MAAV,OACrC,sBAAKR,UAAU,YAAf,UACE,qBAAKA,UAAU,YAAf,SAA4BF,IAC5B,sBAAKE,UAAU,eAAf,UACE,wBAAQuB,QAAS,kBAAMZ,EAAOH,IAAQR,UAAU,wBAAhD,8DAGA,wBAAQuB,QAAS,kBA5BV,SAACf,EAAOD,GACVkB,QAAQ,0NAAD,OAA4ClB,EAA5C,OAIpBmB,IACGC,OADH,UACaC,wBADb,YAC8Cf,EAD9C,YACgEL,IAC7DqB,KAAKf,GACLgB,OAAM,SAAAC,GAAG,OAAIC,MAAM,yCAAD,OAAYD,OAoBFE,CAASzB,EAAOV,IAAQE,UAAU,0BAAzD,uBANJ,UAAmCF,EAAnC,YAA4CU,W,iDC/BrC0B,EAJK,SAACC,GAAsB,IAAD,uBAAXC,EAAW,iCAAXA,EAAW,kBACxC,MAAM,GAAN,OAAUR,yBAAV,OAA0CQ,EAAOC,KAAK,KAAtD,OAA4DF,EAAQ,IAAMA,EAAQ,KCuDrEG,EA9CC,WAAO,IAAD,EACEC,qBAAWC,IAAzBC,EADY,EACZA,GAAIC,EADQ,EACRA,MAEJC,EAASC,cAATD,KAoCR,MAAO,CACLF,KACAI,MApBY,YAA0B,IAAvBA,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACtBpB,IAAMQ,EAAYa,IAAYC,UAAU,CAAEH,QAAOC,aAAa,WAAWjB,MAAK,YAAe,IAAZoB,EAAW,EAAXA,KACzEC,EAAI,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAO,GAEpB,GAAIC,EAAM,CAAC,IACDC,EAAiBD,EAAjBC,GAAIL,EAAaI,EAAbJ,SAEZM,aAAaC,QAAQ,QAArB,UAAiCF,EAAjC,aAAwCL,IAExCH,EAAK,KAELD,EAAMQ,QAENlB,MAAM,+IAQVsB,UArCgBC,sBAAW,sBAAC,oCAAAC,EAAA,mEACvBJ,oBADuB,aACvB,EAAcK,QAAQ,SADC,yCAEnBd,EAAK,WAFc,gBAKLS,aAAaK,QAAQ,SAASC,MAAM,MAL/B,mBAKrBP,EALqB,KAKjBL,EALiB,cAOfpB,IAAMQ,EAAYa,IAAYC,UAAU,CAAEG,KAAIL,aAAa,WAAWjB,MAAK,YAAe,IAAZoB,EAAW,EAAXA,KACnFC,EAAI,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAO,GAEfC,GAAMP,EAAK,UAEhBD,EAAMQ,MAZoB,mFAc3B,MCxBQS,EAAeC,wBAAc,IAyC3BC,EAvCO,SAAC,GAAkB,IAAD,EAAf9D,EAAe,EAAfA,SACf0C,EAAOH,IAAPG,GAD8B,EAGIqB,YAAS,GAAD,OAAIlC,wBAAJ,kCAHZ,mBAGvBmC,EAHuB,KAG7Bd,KAAgBe,EAHa,OAIQF,YAAS,GAAD,OACjDlC,wBADiD,oCAJhB,mBAIvBqC,EAJuB,KAI7BhB,KAAkBiB,EAJW,OAOQJ,YAAS,GAAD,OACjDlC,wBADiD,qEAPhB,mBAOvBuC,EAPuB,KAO7BlB,KAAkBmB,EAPW,OAUQN,YAAS,GAAD,OACjDlC,wBADiD,mDAVhB,mBAUvByC,EAVuB,KAU7BpB,KAAkBqB,EAVW,OAaIR,YAAS,GAAD,OAC7ClC,wBAD6C,0CAE9C,OAACa,QAAD,IAACA,GAAD,UAACA,EAAI8B,YAAL,aAAC,EAAUC,SAAS,UAAkC,GAAtD,0BAA2C/B,QAA3C,IAA2CA,OAA3C,EAA2CA,EAAIU,MAfb,mBAavBsB,EAbuB,KAa7BxB,KAAgByB,EAba,KAmBtC,OACE,cAACf,EAAagB,SAAd,CACEnE,MAAO,CACLuD,SACAC,gBACAC,WACAC,kBACAC,WACAC,kBACAC,WACAC,kBACAG,SACAC,iBAXJ,SAcG3E,KC/BQ6E,EANK,WAAO,IAAD,EACcrC,qBAAWoB,GAEjD,MAAO,CAAEM,SAHe,EAChBA,SAEWC,gBAHK,EACNA,kBCHPW,EAAejB,wBAAc,IAwB3BkB,EAtBO,SAAC,GAAkB,IAAhB/E,EAAe,EAAfA,SAAe,EACAgB,mBAAS,MADT,mBAC/BgE,EAD+B,KAClBC,EADkB,OAERjE,mBAAS,MAFD,mBAE/BkE,EAF+B,KAEtBC,EAFsB,KAOtC,OACE,cAACL,EAAaF,SAAd,CACEnE,MAAO,CACLuE,cACAI,UAPY,SAAAC,GAAS,OAAIJ,EAAeI,IAQxCC,WAPa,kBAAML,EAAe,OAQlCC,UACAC,cANJ,SASGnF,KCOQuF,EAxBE,SAAAF,GAAc,IAAD,EACkE7C,qBAC5FsC,GADME,EADoB,EACpBA,YADoB,IACPI,iBADO,MACK,kBAAM,MADX,MACiBE,kBADjB,MAC8B,kBAAM,MADpC,EAC0CJ,EAD1C,EAC0CA,QAASC,EADnD,EACmDA,WAc/E,MAAO,CACLH,cACAQ,KAZW,WAAyB,IAAxBC,EAAuB,uDAAT,KAC1BL,EAAUC,GACVF,EAAWM,IAWXC,MARY,WACZJ,EAAWD,GACXF,EAAW,OAOXD,QAASA,GAAW,GACpBC,eCQWQ,EAxBM,WAAO,IAClBH,EAASD,EAAS,iBAAlBC,KADiB,EAGaX,IAA9BX,EAHiB,EAGjBA,SAAUC,EAHO,EAGPA,gBAEZxD,EAAQS,mBAAQ,yBAAM8C,QAAN,IAAMA,OAAN,EAAMA,EAAUzC,KAAI,gBAAG2B,EAAH,EAAGA,GAAH,MAAmB,CAAErD,MAArB,EAAOS,KAA2BC,MAAO2C,KAAO,CAACc,OAK3F,OACE,cAAC,EAAD,CAAUnE,MAAM,mDAAhB,SACE,cAAC,EAAD,CACEY,MAAOA,EACPG,eAAe,WACf8E,gBAAgB,gBAChB7E,QAASoD,EACTvD,OAVa,SAAAwC,GAAE,OAAIoC,EAAK,CAAEpC,KAAIrD,MAAO,+HAWrCc,MAVY,kBAAM2E,EAAK,CAAEzF,MAAO,sGCNzB8F,EANK,WAAO,IAAD,EACcrD,qBAAWoB,GAEjD,MAAO,CAAEQ,SAHe,EAChBA,SAEWC,gBAHK,EACNA,kBCLdyB,EAAkB,CACtBC,QAAS,6CACTC,QAAS,iFACTC,QAAS,6CACTC,MAAO,kFAGHC,EAAa,SAAA3B,GAAI,OAAIsB,EAAgBtB,IAI5B2B,IC6BAC,EA9BM,WAAO,IAClBZ,EAASD,EAAS,iBAAlBC,KADiB,EAGaK,IAA9BzB,EAHiB,EAGjBA,SAAUC,EAHO,EAGPA,gBAEZ1D,EAAQS,mBACZ,yBACEgD,QADF,IACEA,OADF,EACEA,EAAU3C,KAAI,gBDRO4E,ECQJ7F,EAAH,EAAGA,KAAM4C,EAAT,EAASA,GAAIoB,EAAb,EAAaA,KAAb,MAAyB,CACrCzE,MAAM,GAAD,OAAKS,EAAL,cDTc6F,ECSY7B,EDTH6B,EAAM5E,KAAI,SAAA+C,GAAI,OAAI2B,EAAW3B,OCSpBlC,KAAK,MAArC,KACL7B,MAAO2C,QAEX,CAACgB,IAMH,OACE,cAAC,EAAD,CAAUrE,MAAM,yIAAhB,SACE,cAAC,EAAD,CACEY,MAAOA,EACPG,eAAe,QACfC,QAASsD,EACTzD,OATa,SAAAwC,GAAE,OAAIoC,EAAK,CAAEpC,KAAIrD,MAAO,iJAUrCc,MATY,kBAAM2E,EAAK,CAAEzF,MAAO,wHCfzBuG,EANG,WAAO,IAAD,EACY9D,qBAAWoB,GAE7C,MAAO,CAAEI,OAHa,EACdA,OAESC,cAHK,EACNA,gBCoCHsC,EAhCI,WAAO,IAChBf,EAASD,EAAS,eAAlBC,KADe,EAEWc,IAA1BtC,EAFe,EAEfA,OAAQC,EAFO,EAEPA,cACRG,EAAayB,IAAbzB,SAEFzD,EAAQS,mBACZ,yBACE4C,QADF,IACEA,OADF,EACEA,EAAQvC,KAAI,YAA4B,IAAD,EAAxBjB,EAAwB,EAAxBA,KAAM4C,EAAkB,EAAlBA,GAAI6C,EAAc,EAAdA,QACjBO,EAAW,OAAGpC,QAAH,IAAGA,GAAH,UAAGA,EAAUqC,MAAK,qBAAGrD,KAAgB6C,YAArC,aAAG,EAA4CzF,KAGhE,MAAO,CAAET,MADE,UAAMS,EAAN,YAAcgG,EAAW,WAAOA,EAAP,KAAwB,IAC5C/F,MAAO2C,QAE3B,CAACY,EAAQI,IAMX,OACE,cAAC,EAAD,CAAUrE,MAAM,uCAAhB,SACE,cAAC,EAAD,CACEY,MAAOA,EACPG,eAAe,SACfC,QAASkD,EACTrD,OATa,SAAAwC,GAAE,OAAIoC,EAAK,CAAEpC,KAAIrD,MAAO,yHAUrCc,MATY,kBAAM2E,EAAK,CAAEzF,MAAO,gG,OCbzB2G,EAbS,SAAAC,GACtB,OAAQA,GACN,IAAK,OACH,MAAO,GACT,IAAK,SACH,OAAO,EACT,IAAK,cACH,MAAO,GACT,QACE,OAAO,OCiDEC,EAnDF,SAAC,GASP,IARLC,EAQI,EARJA,OACAC,EAOI,EAPJA,OAOI,IANJC,mBAMI,MANU,uCAMV,MALJC,mBAKI,MALU,6CAKV,EAJJC,EAII,EAJJA,SACAC,EAGI,EAHJA,gBACAjH,EAEI,EAFJA,UACAkH,EACI,EADJA,cAEQzB,EAAUH,IAAVG,MADJ,EAGoB1E,mBAASmG,GAAiB,IAH9C,mBAGGC,EAHH,KAGSC,EAHT,KAOEC,EAAe9D,uBAAY,kBAAMyD,EAASG,KAAO,CAACG,KAAKtE,UAAUmE,KAEjEI,EAAehE,uBAAY,gBAAGhD,EAAH,EAAGA,KAAMC,EAAT,EAASA,MAAT,OAAqB4G,GAAQ,SAAAI,GAAI,kCAAUA,GAAV,kBAAiBjH,EAAOC,SAAW,CACnG8G,KAAKtE,UAAUmE,KAGjB,OACE,uBAAMnH,UAAWI,IAAW,OAAQJ,GAAYgH,SAT5B,SAAA3G,GAAC,OAAIA,EAAEoH,kBAS3B,UACE,qBAAKzH,UAAU,cAAf,SACG4G,EAAOpF,KAAI,gBAAGjB,EAAH,EAAGA,KAAMmH,EAAT,EAASA,UAAWhB,EAApB,EAAoBA,KAAMiB,EAA1B,EAA0BA,SAA1B,IAAoCC,UAApC,kBAAgD,kBAAM,GAAtD,GACAT,GACNU,uBAAaH,EAAW,CACtBC,WACApH,OACAuH,IAAKvH,EACLL,SAAUqH,EACV/G,MAAO2G,EAAK5G,IAASkG,EAAgBC,KAEvC,UAGR,sBAAK1G,UAAWI,IAAW,eAAgB6G,GAA3C,UACGJ,GACC,wBAAQtF,QAASkE,EAAOzF,UAAU,qBAAlC,SACG8G,IAGL,wBAAQvF,QAAS8F,EAAcrH,UAAU,qBAAzC,SACG+G,WC4BIgB,EA7EA,SAAC,GAAqF,IAAnFC,EAAkF,EAAlFA,QAAS9H,EAAyE,EAAzEA,SAAUU,EAA+D,EAA/DA,MAAOL,EAAwD,EAAxDA,KAAMT,EAAkD,EAAlDA,MAAOU,EAA2C,EAA3CA,MAA2C,IAApCyH,gBAAoC,MAAzB,8FAAyB,IAC1ElH,oBAAS,GADiE,mBAC3FwE,EAD2F,KACrF2C,EADqF,KAG5FC,EAAYC,iBAAO,MAEnBC,EAAoBlH,mBAAQ,wBAAOX,IAAK,OAAWwH,QAAX,IAAWA,GAAX,UAAWA,EAAU,UAArB,aAAW,EAAcxH,SAAQ,CAACA,IAE1E8H,EAAoBnH,mBACxB,+BAAM6G,QAAN,IAAMA,GAAN,UAAMA,EAASxB,MAAK,gBAAU+B,EAAV,EAAG/H,MAAH,OAA4B6H,IAAsBE,YAAtE,aAAM,EAA8EzI,QACpF,CAACU,IAKGgI,EAAajF,uBACjB,SAAAlD,GAAM,IACIoI,EAAcpI,EAAEC,OAAhBmI,UAER,GAAKlD,IAAQkD,EAAUC,SAAS,iBAEhC,OAAOC,MAET,CAACpD,IAGGoD,EAAc,kBAAMT,GAAQ,IAE5BU,EAASrF,uBAAY,kBAAM2E,GAAQ,SAAA1H,GAAK,OAAKA,OAAQ,IAI3DqI,qBAAU,WACR3I,EAAS,CAAEM,MAAO6H,EAAmB9H,WACpC,CAAC8H,IAeJ,OARAQ,qBAAU,kBAAMX,GAAQ,KAAQ,CAACG,IAEjCQ,qBAAU,WACR,IAAMC,EAAWC,SAASC,iBAAiB,YAAaR,GAExD,OAAOO,SAASE,oBAAoB,YAAaH,KAChD,IAGD,sBAAKI,IAAKf,EAAWnI,UAAU,0BAA/B,UACE,yBAAQA,UAAU,gBAAgBO,KAAMA,EAAMgB,QAASqH,EAAvD,UACE,qBAAK5I,UAAU,eAAf,SAA+BF,IAC/B,qBAAKE,UAAU,eAAf,SAA+BsI,OAEhC/C,GACC,sBAAKvF,UAAS,yBAA4D,qBAA1E,UACGY,GACC,sBAAK2D,KAAK,SAAS4E,YAtBX,WAChBR,IACA/H,KAoBmDZ,UAAU,gBAArD,UACGiI,EADH,QAFJ,OAMGD,QANH,IAMGA,OANH,EAMGA,EAASxG,KAAI,gBAAG1B,EAAH,EAAGA,MAAOU,EAAV,EAAUA,MAAV,OACZ,qBACE+D,KAAK,SAELvE,UAAU,gBACVmJ,YAAa,kBArCJ,SAAA3I,GAAK,OAAIN,EAAS,CAAEM,QAAOD,SAqCjB6I,CAAa5I,IAJlC,SAMGV,GANH,UAEUA,EAFV,YAEmBU,cChChB6I,EA3BK,SAAAlJ,GAAU,IACpBoF,EAASD,EAAS,eAAlBC,KAEAxB,EAAWsC,IAAXtC,OAEFiE,EAAU7G,mBACd,yBACE4C,QADF,IACEA,OADF,EACEA,EAAQvC,KAAI,gBAAG2B,EAAH,EAAGA,GAAH,MAAmB,CAC7BrD,MADU,EAAOS,KAEjBC,MAAO2C,QAEX,CAACY,IAGH,OAAKiE,EAGH,cAAC,EAAD,aACEA,QAASA,EACTlI,MAAM,uCACNmI,SAAS,wFACTrH,MAAO,kBAAM2E,EAAK,CAAEzF,MAAO,4FACvBK,IARa,MCaRmJ,EA3BO,SAAAnJ,GAAU,IACtBoF,EAASD,EAAS,iBAAlBC,KAEAtB,EAAaW,IAAbX,SAEF+D,EAAU7G,mBACd,yBACE8C,QADF,IACEA,OADF,EACEA,EAAUzC,KAAI,gBAAG2B,EAAH,EAAGA,GAAH,MAAmB,CAC/BrD,MADY,EAAOS,KAEnBC,MAAO2C,QAEX,CAACc,IAGH,OAAK+D,EAGH,cAAC,EAAD,aACEA,QAASA,EACTlI,MAAM,+DACNmI,SAAS,gHACTrH,MAAO,kBAAM2E,EAAK,CAAEzF,MAAO,oHACvBK,IARa,MCjBjB6H,EAAU,CACd,CACElI,MAAO,uCACPU,MAAO,KAET,CACEV,MAAO,6CACPU,MAAO,KAET,CACEV,MAAO,2BACPU,MAAO,KAET,CACEV,MAAO,uCACPU,MAAO,KAET,CACEV,MAAO,qBACPU,MAAO,KAET,CACEV,MAAO,2BACPU,MAAO,KAET,CACEV,MAAO,2BACPU,MAAO,KAET,CACEV,MAAO,uCACPU,MAAO,KAET,CACEV,MAAO,mDACPU,MAAO,KAET,CACEV,MAAO,6CACPU,MAAO,MAET,CACEV,MAAO,uCACPU,MAAO,MAET,CACEV,MAAO,6CACPU,MAAO,OAMI+I,EAFK,SAAApJ,GAAK,OAAI,cAAC,EAAD,aAAQ6H,QAASA,EAASlI,MAAM,kCAAYK,KrBnDnE6H,EAAU,GAEPwB,EAAI,EAAGA,EAAI,GAAIA,IACtBxB,EAAQrF,KAAK,CACX7C,QAAQ,IAAI2J,MAAOC,cAAgBF,GAAGG,WACtCnJ,QAAQ,IAAIiJ,MAAOC,cAAgBF,GAAGG,aAI1C,I,EAEeC,EAFI,SAAAzJ,GAAK,OAAI,cAAC,EAAD,aAAQ6H,QAASA,EAASlI,MAAM,sBAAUK,KsBDhEyG,EAAS,CACb,CACErG,KAAM,QACNmH,UAAW,cAAC,EAAD,KAEb,CACEnH,KAAM,UACNmH,UAAW,cAAC,EAAD,KAEb,CACEnH,KAAM,QACNmH,UAAW,cAAC,EAAD,KAEb,CACEnH,KAAM,OACNmH,UAAW,cAAC,EAAD,MAqBAmC,GAjBK,WAAO,IACjBlH,EAASC,cAATD,KASR,OACE,cAAC,EAAD,CAAU7C,MAAM,uCAAhB,SACE,cAAC,EAAD,CAAM8G,OAAQA,EAAQI,SATL,SAAAxG,GAAU,IAAD,EACYA,GAAS,GAAzCsJ,EADoB,EACpBA,MAAOC,EADa,EACbA,KAAMC,EADO,EACPA,MAAOC,EADA,EACAA,QACtBC,EAAI,UAAMH,EAAN,YAAcC,GAExBrH,EAAK,UAAYI,IAAYC,UAAU,CAAE8G,QAAOI,OAAMD,mBC5B3CE,GANK,WAAO,IAAD,EACc5H,qBAAWoB,GAEjD,MAAO,CAAEU,SAHe,EAChBA,SAEWC,gBAHK,EACNA,kBC+CL8F,GAlCM,WAAO,IAClB7E,EAASD,EAAS,iBAAlBC,KADiB,EAGa4E,KAA9B9F,EAHiB,EAGjBA,SAAUC,EAHO,EAGPA,gBACVP,EAAWsC,IAAXtC,OAEFrD,EAAQS,mBACZ,yBACEkD,QADF,IACEA,OADF,EACEA,EAAU7C,KAAI,YAAmC,IAjBhB6I,EAiBhB9J,EAA+B,EAA/BA,KAAM4C,EAAyB,EAAzBA,GAAWmH,EAAc,EAArBR,MACnBS,GAlByBF,EAkBW,CAACC,GAATvG,EAjBT3C,QAAO,YAAsB,IAAfkJ,EAAc,EAAlBnH,GACvC,cAAOkH,QAAP,IAAOA,OAAP,EAAOA,EAAU7F,SAAS8F,MAEJ9I,KAAI,qBAAGjB,QAEjB8B,KAAK,OAab,MAAO,CACLvC,MAAM,GAAD,OAAKS,EAAL,YAAagK,EAAWC,OAAX,WAAwBD,EAAxB,KAAwC,IAC1D/J,MAAO2C,QAGb,CAACkB,IAMH,OACE,cAAC,EAAD,CAAUvE,MAAM,mDAAhB,SACE,cAAC,EAAD,CACEY,MAAOA,EACPG,eAAe,QACfC,QAASwD,EACT3D,OATa,SAAAwC,GAAE,OAAIoC,EAAK,CAAEpC,KAAIrD,MAAO,qIAUrCc,MATY,kBAAM2E,EAAK,CAAEzF,MAAO,4GC3BzB2K,GANG,WAAO,IAAD,EACYlI,qBAAWoB,GAE7C,MAAO,CAAEc,OAHa,EACdA,OAESC,cAHK,EACNA,gBCwBHgG,GA7BE,SAAAlK,GACf,OAAQA,GACN,KAAK,EACH,MAAO,uCACT,KAAK,EACH,MAAO,6CACT,KAAK,EACH,MAAO,2BACT,KAAK,EACH,MAAO,uCACT,KAAK,EACH,MAAO,qBACT,KAAK,EACH,MAAO,2BACT,KAAK,EACH,MAAO,2BACT,KAAK,EACH,MAAO,uCACT,KAAK,EACH,MAAO,mDACT,KAAK,GACH,MAAO,6CACT,KAAK,GACH,MAAO,uCACT,KAAK,GACH,MAAO,+CC4BE4J,GAzCM,WAAO,IAClB7E,EAASD,EAAS,eAAlBC,KADiB,EAGSkF,KAA1BhG,EAHiB,EAGjBA,OAAQC,EAHS,EAGTA,cACRX,EAAWsC,IAAXtC,OACAE,EAAaW,IAAbX,SAEFvD,EAAQS,mBACZ,yBACEsD,QADF,IACEA,OADF,EACEA,EAAQjD,KAAI,YAAmC,IAAD,IAA/B2B,EAA+B,EAA/BA,GAAI2G,EAA2B,EAA3BA,MAAOI,EAAoB,EAApBA,KAAMD,EAAc,EAAdA,QACxBU,EAAS,OAAG5G,QAAH,IAAGA,GAAH,UAAGA,EAAQyC,MAAK,gBAAO8D,EAAP,EAAGnH,GAAH,OAAqB2G,IAAUQ,YAA/C,aAAG,EAAsD/J,KAClEqK,EAAW,OAAG3G,QAAH,IAAGA,GAAH,UAAGA,EAAUuC,MAAK,gBAAOqE,EAAP,EAAG1H,GAAH,OAAuB8G,IAAYY,YAArD,aAAG,EAA8DtK,KAC5EwJ,EAAOG,EAAKxG,MAAM,KAAK,GAK7B,MAAO,CACL5D,MAHY,CAFA4K,GAASI,SAAQ,OAACZ,QAAD,IAACA,OAAD,EAACA,EAAMxG,MAAM,KAAK,KAE3BqG,EAAMa,EAAaD,GAAWtI,KAAK,KAIvD7B,MAAO2C,QAGb,CAACY,EAAQE,EAAUQ,IAMrB,OACE,cAAC,EAAD,CAAU3E,MAAM,8FAAhB,SACE,cAAC,EAAD,CACEY,MAAOA,EACPG,eAAe,SACfC,QAAS4D,EACT/D,OATa,SAAAwC,GAAE,OAAIoC,EAAK,CAAEpC,KAAIrD,MAAO,qIAUrCc,MATY,kBAAM2E,EAAK,CAAEzF,MAAO,4GChClCiL,GAAQ,SAAC,GAAkD,IAAhDxK,EAA+C,EAA/CA,KAAMyK,EAAyC,EAAzCA,OAAQlL,EAAiC,EAAjCA,MAAOE,EAA0B,EAA1BA,UAAWD,EAAe,EAAfA,SAAe,EAC/BuF,EAAS/E,GAAhCwE,EADsD,EACtDA,YAAaU,EADyC,EACzCA,MAEfwF,EAAc,SAAA5K,GAGlB,GAFsBA,EAAEC,OAAhBmI,UAEMC,SAAS,SAAU,OAAOjD,KAGpCyF,EAAgB,SAAC,GACrB,GAAY,WADqB,EAAVpD,IACD,OAAOrC,KAa/B,OAVAoD,qBAAU,WACR,IAAMsC,EAAapC,SAASC,iBAAiB,YAAaiC,GACpDG,EAAerC,SAASC,iBAAiB,UAAWkC,GAE1D,OAAO,WACLnC,SAASE,oBAAoB,YAAakC,GAC1CpC,SAASE,oBAAoB,YAAamC,MAE3C,IAECrG,IAAgBxE,EAAa,KAG/B,qBAAKP,UAAWI,IAAW,QAAS,CAAE4K,OAAQK,QAAQL,KAAtD,SACE,sBAAKhL,UAAWI,IAAW,gBAAiBJ,GAA5C,UACE,sBAAKA,UAAU,eAAf,UACE,oBAAIA,UAAU,cAAd,SAA6BF,IAC7B,wBAAQyB,QAASkE,EAAOzF,UAAU,cAAlC,qBAIDD,QAQMuL,GAFQ,SAAAnL,GAAK,OAAIoL,uBAAa,cAAC,GAAD,2BAAWpL,GAAX,aAAmBA,EAAMJ,YAAmBgJ,SAASyC,OC5CnFC,GAFD,SAAAC,GAAM,gBAAOA,EAAP,YAAiBC,KAAKC,SAASjC,SAAS,IAAIkC,OAAO,EAAG,KCcpEjF,GAAS,CACb,CACEF,KAAM,OACNnG,KAAM,OACNmH,UAAW,cAAC,EAAD,CAAOhB,KAAK,OAAOoF,YAAY,+KAiD/BC,GA7CO,WAAO,IAAD,EACCzG,IAAnBG,EADkB,EAClBA,MAAOR,EADW,EACXA,QAEPf,EAAoBU,IAApBV,gBAHkB,EAKgBnD,mBAAS,MALzB,mBAKnBmG,EALmB,KAKJ8E,EALI,KAOpBC,EAAa,WACjB,OAAOvK,IACJwK,IAAIhK,EAAYa,IAAYC,UAAU,CAAEG,GAAI8B,EAAQ9B,KAAO,cAC3DtB,MAAK,gBAAGoB,EAAH,EAAGA,KAAH,OAAc+I,EAAgB,OAAC/I,QAAD,IAACA,OAAD,EAACA,EAAO,QA0BhD,OARA4F,qBAAU,YACR,OAAI5D,QAAJ,IAAIA,OAAJ,EAAIA,EAAS9B,IACX8I,IAEAD,EAAiB,QAElB,QAAC/G,QAAD,IAACA,OAAD,EAACA,EAAS9B,MAEF,OAAP8B,QAAO,IAAPA,OAAA,EAAAA,EAAS9B,MAAO+D,EAAsB,KAGxC,cAAC,GAAD,CAAOlH,UAAU,iBAAiBO,KAAK,gBAAgBT,MAAOmF,EAAQnF,MAAtE,SACE,cAAC,EAAD,CAAMoH,cAAeA,EAAeN,OAAQA,GAAQI,SA3BnC,SAAA5E,GACnB,cAAI6C,QAAJ,IAAIA,OAAJ,EAAIA,EAAS9B,IACJzB,IAAMyK,MAAMjK,EAAY,GAAD,oBAAkB+C,EAAQ9B,KAAOf,GAAQP,MAAK,WAC1E4D,IACAwG,IACA/H,OAIGxC,IAAM0K,KAAKlK,EAAY,GAAI,aAA3B,aAA2CiB,GAAIsI,GAAM,OAAUrJ,IAAUP,MAAK,WACnF4D,IACAvB,a,SCWSmI,GAtDK,SAAC,GAAsD,IAApD7L,EAAmD,EAAnDA,MAAOwH,EAA4C,EAA5CA,QAASsE,EAAmC,EAAnCA,MAAO/L,EAA4B,EAA5BA,KAAMT,EAAsB,EAAtBA,MAAOI,EAAe,EAAfA,SACnDqM,EAAkBpL,mBAAQ,kBAAM6G,EAAQ5G,QAAO,gBAAUmH,EAAV,EAAG/H,MAAH,OAA4BA,EAAMgE,SAAS+D,QAAe,CAC7G/H,IAGI4I,EAAe7F,uBACnB,SAAAiJ,GACE,IAAIC,EAAW,aAAOjM,GAElBA,EAAMgE,SAASgI,GACjBC,EAAYC,OAAOlM,EAAMmM,QAAQH,GAAa,GAE9CC,EAAY9J,KAAK6J,GAGnBtM,EAAS,CACPK,OACAC,MAAOiM,MAGX,CAACjM,IAGH,OACE,sBAAKR,UAAU,eAAf,UACGF,GAAS,uBAAOE,UAAU,qBAAjB,SAAuCF,IACjD,qBAAKE,UAAU,sBAAf,SACGuM,EAAgB/K,KAAI,gBAAG1B,EAAH,EAAGA,MAAOU,EAAV,EAAUA,MAAV,OACnB,wBAAoBe,QAAS,kBAAM6H,EAAa5I,IAAQR,UAAU,2BAAlE,SACGF,GADUA,QAKjB,qBAAKE,UAAU,uBAAf,SACGgI,EAAQxG,KAAI,gBAAG1B,EAAH,EAAGA,MAAOU,EAAV,EAAUA,MAAV,OACX,wBAEEe,QAAS,kBAAM6H,EAAa5I,IAC5BoM,SACEL,EAAgB/B,QAAU8B,IACzBC,EAAgBM,MAAK,gBAAUtE,EAAV,EAAG/H,MAAH,OAA4BA,IAAU+H,KAE9DvI,UAAWI,IAAW,gBAAiB,CACrC0M,OAAQP,EAAgBM,MAAK,gBAAUtE,EAAV,EAAG/H,MAAH,OAA4BA,IAAU+H,OARvE,SAWGzI,GAXH,UACUA,EADV,YACmBU,aCzBduM,GARY,SAAC,GAAsC,IAApCxM,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,MAAON,EAAsB,EAAtBA,SAAUoM,EAAY,EAAZA,MAC3CrI,EAAaW,IAAbX,SAEF+D,EAAU7G,mBAAQ,kBAAM8C,EAASzC,KAAI,gBAAG2B,EAAH,EAAGA,GAAH,MAAmB,CAAErD,MAArB,EAAOS,KAA2BC,MAAO2C,QAAQ,CAACc,IAE7F,OAAO,cAAC,GAAD,CAAaqI,MAAOA,EAAO/L,KAAMA,EAAMyH,QAASA,EAASlI,MAAM,mDAAWI,SAAUA,EAAUM,MAAOA,KC4B/FwM,GAhCO,SAAC,GAA4C,IAA1CzM,EAAyC,EAAzCA,KAAMC,EAAmC,EAAnCA,MAAO+D,EAA4B,EAA5BA,KAAMzE,EAAsB,EAAtBA,MAAOI,EAAe,EAAfA,SACzCqF,EAASD,EAAS,iBAAlBC,KAEApB,EAAayB,IAAbzB,SAEF6D,EAAU7G,mBAAQ,WACtB,IAAM8L,EAAQ,OAAG9I,QAAH,IAAGA,OAAH,EAAGA,EAAU/C,QAAO,YAA4B,IAAnB8L,EAAkB,EAAxB3I,KACnC,OAAQA,GACN,IAAK,UACH,OAAO2I,EAAY1I,SAAS,WAC9B,IAAK,UACH,OAAO0I,EAAY1I,SAAS,WAC9B,QACE,OAAO,MAIb,cAAOyI,QAAP,IAAOA,OAAP,EAAOA,EAAUzL,KAAI,gBAAG2B,EAAH,EAAGA,GAAH,MAAmB,CAAErD,MAArB,EAAOS,KAA2BC,MAAO2C,QAC7D,CAACgB,IAEJ,OACE,cAAC,EAAD,CACErE,MAAOA,EACPkI,QAASA,EACTxH,MAAOA,EACPD,KAAMA,EACNL,SAAUA,EACVU,MAAO,kBAAM2E,EAAK,CAAEzF,MAAO,sHClB3B8G,GAAS,CACb,CACEF,KAAM,OACNnG,KAAM,OACNmH,UAAW,cAAC,EAAD,CAAOhB,KAAK,OAAOoF,YAAY,iCAE5C,CACEpF,KAAM,cACNnG,KAAM,WACNmH,UAAW,cAAC,GAAD,CAAoB4E,MAAO,MAExC,CACE/L,KAAM,UACNmH,UAAW,cAAC,GAAD,CAAe5H,MAAM,6CAAUyE,KAAK,cAiDpC4I,GA7CK,WAAO,IAAD,EACG7H,IAAnBG,EADgB,EAChBA,MAAOR,EADS,EACTA,QAEPjB,EAAkBqC,IAAlBrC,cAHgB,EAKkBjD,mBAAS,MAL3B,mBAKjBmG,EALiB,KAKF8E,EALE,KAOlBC,EAAa,WACjB,OAAOvK,IACJwK,IAAIhK,EAAYa,IAAYC,UAAU,CAAEG,GAAI8B,EAAQ9B,KAAO,YAC3DtB,MAAK,gBAAGoB,EAAH,EAAGA,KAAH,OAAc+I,EAAgB,OAAC/I,QAAD,IAACA,OAAD,EAACA,EAAO,QA0BhD,OARA4F,qBAAU,WACJ5D,EAAQ9B,GACV8I,IAEAD,EAAiB,QAElB,QAAC/G,QAAD,IAACA,OAAD,EAACA,EAAS9B,MAEF,OAAP8B,QAAO,IAAPA,OAAA,EAAAA,EAAS9B,MAAO+D,EAAsB,KAGxC,cAAC,GAAD,CAAOlH,UAAU,eAAeO,KAAK,cAAcT,MAAOmF,EAAQnF,MAAlE,SACE,cAAC,EAAD,CAAMoH,cAAeA,EAAeN,OAAQA,GAAQI,SA3BnC,SAAA5E,GACnB,cAAI6C,QAAJ,IAAIA,OAAJ,EAAIA,EAAS9B,IACJzB,IAAMyK,MAAMjK,EAAY,GAAD,kBAAgB+C,EAAQ9B,KAAOf,GAAQP,MAAK,WACxE4D,IACAwG,IACAjI,OAIGtC,IAAM0K,KAAKlK,EAAY,GAAI,WAA3B,aAAyCiB,GAAIsI,GAAM,OAAUrJ,IAAUP,MAAK,WACjF4D,IACAzB,aCnDAgE,GAAU,CACd,CACElI,MAAOoG,EAAW,WAClB1F,MAAO,WAET,CACEV,MAAOoG,EAAW,WAClB1F,MAAO,YAQI4M,GAJS,SAAC,GAAD,IAAG7M,EAAH,EAAGA,KAAMC,EAAT,EAASA,MAAON,EAAhB,EAAgBA,SAAUoM,EAA1B,EAA0BA,MAA1B,OACtB,cAAC,GAAD,CAAa/L,KAAMA,EAAMyH,QAASA,GAASsE,MAAOA,EAAOxM,MAAM,2BAAOI,SAAUA,EAAUM,MAAOA,KCD7FoG,GAAS,CACb,CACEF,KAAM,OACNnG,KAAM,OACNmH,UAAW,cAAC,EAAD,CAAO5H,MAAM,qBAAM4G,KAAK,OAAOoF,YAAY,oHAExD,CACEpF,KAAM,OACNnG,KAAM,QACNmH,UAAW,cAAC,EAAD,CAAO5H,MAAM,oGAAoB4G,KAAK,WAEnD,CACEA,KAAM,OACNnG,KAAM,WACNmH,UAAW,cAAC,EAAD,CAAO5H,MAAM,uCAAS4G,KAAK,cAExC,CACEA,KAAM,cACNnG,KAAM,OACNmH,UAAW,cAAC,GAAD,CAAiB4E,MAAO,EAAGxM,MAAM,oFAE9C,CACE4G,KAAM,cACNnG,KAAM,WACNmH,UAAW,cAAC,GAAD,CAAoB4E,MAAO,EAAGxM,MAAM,qDAC/C8H,UAAW,SAAAT,GAAI,uBAAIA,EAAI,YAAR,aAAI,EAAc3C,SAAS,cAmD/B6I,GA/CO,WAAO,IAAD,EACC/H,IAAnBG,EADkB,EAClBA,MAAOR,EADW,EACXA,QAEPb,EAAoBwB,IAApBxB,gBACAJ,EAAkBqC,IAAlBrC,cAJkB,EAMgBjD,mBAAS,MANzB,mBAMnBmG,EANmB,KAMJ8E,EANI,KAQpBsB,EAAe,WACnB,OAAO5L,IACJwK,IAAIhK,EAAYa,IAAYC,UAAU,CAAEG,GAAI8B,EAAQ9B,KAAO,WAC3DtB,MAAK,gBAAGoB,EAAH,EAAGA,KAAH,OAAc+I,EAAgB,OAAC/I,QAAD,IAACA,OAAD,EAACA,EAAO,QA2BhD,OARA4F,qBAAU,WACJ5D,EAAQ9B,GACVmK,IAEAtB,EAAiB,QAElB,QAAC/G,QAAD,IAACA,OAAD,EAACA,EAAS9B,MAEF,OAAP8B,QAAO,IAAPA,OAAA,EAAAA,EAAS9B,MAAO+D,EAAsB,KAGxC,cAAC,GAAD,CAAOlH,UAAU,iBAAiBO,KAAK,gBAAgBT,MAAOmF,EAAQnF,MAAtE,SACE,cAAC,EAAD,CAAMoH,cAAeA,EAAeN,OAAQA,GAAQI,SA5BnC,SAAA5E,GACnB,cAAI6C,QAAJ,IAAIA,OAAJ,EAAIA,EAAS9B,IACJzB,IAAMyK,MAAMjK,EAAY,GAAD,iBAAe+C,EAAQ9B,KAAOf,GAAQP,MAAK,WACvE4D,IACA6H,IACAlJ,IACAJ,OAIGtC,IAAM0K,KAAKlK,EAAY,GAAI,UAA3B,aAAwCiB,GAAIsI,GAAM,OAAUrJ,IAAUP,MAAK,WAChF4D,IACArB,aCxDAwC,GAAS,CACb,CACEF,KAAM,OACNnG,KAAM,OACNmH,UAAW,cAAC,EAAD,CAAO5H,MAAM,qBAAM4G,KAAK,OAAOoF,YAAY,oHAExD,CACEpF,KAAM,OACNnG,KAAM,QACNmH,UAAW,cAAC,EAAD,CAAa5H,MAAM,2CAkDnByN,GA9CO,WAAO,IAAD,EACCjI,IAAnBG,EADkB,EAClBA,MAAOR,EADW,EACXA,QACPjB,EAAkBqC,IAAlBrC,cACAM,EAAoB6F,KAApB7F,gBAHkB,EAKgBvD,mBAAS,MALzB,mBAKnBmG,EALmB,KAKJ8E,EALI,KAOpBwB,EAAe,WACnB,OAAO9L,IACJwK,IAAIhK,EAAYa,IAAYC,UAAU,CAAEG,GAAI8B,EAAQ9B,KAAO,WAC3DtB,MAAK,gBAAGoB,EAAH,EAAGA,KAAH,OAAc+I,EAAgB,OAAC/I,QAAD,IAACA,OAAD,EAACA,EAAO,QA2BhD,OARA4F,qBAAU,WACJ5D,EAAQ9B,GACVqK,IAEAxB,EAAiB,QAElB,QAAC/G,QAAD,IAACA,OAAD,EAACA,EAAS9B,MAEF,OAAP8B,QAAO,IAAPA,OAAA,EAAAA,EAAS9B,MAAO+D,EAAsB,KAGxC,cAAC,GAAD,CAAOlH,UAAU,iBAAiBO,KAAK,gBAAgBT,MAAOmF,EAAQnF,MAAtE,SACE,cAAC,EAAD,CAAMoH,cAAeA,EAAeN,OAAQA,GAAQI,SA5BnC,SAAA5E,GACnB,cAAI6C,QAAJ,IAAIA,OAAJ,EAAIA,EAAS9B,IACJzB,IAAMyK,MAAMjK,EAAY,GAAD,iBAAe+C,EAAQ9B,KAAOf,GAAQP,MAAK,WACvE4D,IACA+H,IACAxJ,IACAM,OAIG5C,IAAM0K,KAAKlK,EAAY,GAAI,UAA3B,aAAwCiB,GAAIsI,GAAM,MAAOlH,KAAM,CAAC,YAAenC,IAAUP,MAAK,WACnG4D,IACAnB,aCrCAsC,GAAS,CACb,CACEF,KAAM,OACNnG,KAAM,OACNmH,UAAW,cAAC,EAAD,CAAO5H,MAAM,+EAAmB4G,KAAK,OAAOoF,YAAY,aAErE,CACEpF,KAAM,OACNnG,KAAM,QACNmH,UAAW,cAAC,EAAD,CAAa5H,MAAM,0CAEhC,CACE4G,KAAM,OACNnG,KAAM,UACNmH,UAAW,cAAC,EAAD,CAAe5H,MAAM,iDAqDrByN,GAjDO,WAAO,IACnB9K,EAAOH,IAAPG,GADkB,EAEC6C,IAAnBG,EAFkB,EAElBA,MAAOR,EAFW,EAEXA,QACPP,EAAkB+F,KAAlB/F,cAHkB,EAKgB3D,mBAAS,MALzB,mBAKnBmG,EALmB,KAKJ8E,EALI,KAOpByB,EAAa,WACjB,OAAO/L,IACJwK,IAAIhK,EAAYa,IAAYC,UAAU,CAAEG,GAAI8B,EAAQ9B,KAAO,YAC3DtB,MAAK,gBAAGoB,EAAH,EAAGA,KAAH,OAAc+I,EAAgB,OAAC/I,QAAD,IAACA,OAAD,EAACA,EAAO,QAG1CoE,EAAe9D,uBACnB,SAAAnB,GACE,GAAKK,EACL,cAAIwC,QAAJ,IAAIA,OAAJ,EAAIA,EAAS9B,IACJzB,IAAMyK,MAAMjK,EAAY,GAAD,kBAAgB+C,EAAQ9B,KAAOf,GAAQP,MAAK,WACxE4D,IACAgI,IACA/I,OAIGhD,IAAM0K,KAAKlK,EAAY,GAAI,WAA3B,aAAyCiB,GAAIsI,GAAM,MAAO1F,QAAO,OAAEtD,QAAF,IAAEA,OAAF,EAAEA,EAAIU,IAAOf,IAAUP,MAAK,WAClG4D,IACAf,SAGJ,CAACjC,IAWH,OARAoG,qBAAU,WACJ5D,EAAQ9B,GACVsK,IAEAzB,EAAiB,QAElB,QAAC/G,QAAD,IAACA,OAAD,EAACA,EAAS9B,MAEF,OAAP8B,QAAO,IAAPA,OAAA,EAAAA,EAAS9B,MAAO+D,EAAsB,KAGxC,cAAC,GAAD,CAAOlH,UAAU,eAAeO,KAAK,cAAcT,MAAOmF,EAAQnF,MAAlE,SACE,cAAC,EAAD,CAAMoH,cAAeA,EAAeN,OAAQA,GAAQI,SAAUK,OC/EvDqG,GACH,EADGA,GAEN,EAFMA,GAGJ,EAHIA,GAIL,EAJKA,GAKL,EAWKC,IARK,mBACfD,GAAmB,MADJ,cAEfA,GAAgB,GAFD,cAGfA,GAAkB,GAHH,cAIfA,GAAiB,GAJF,cAKfA,GAAiB,GAIX,SADIC,GAEF,UAFEA,GAGF,UAIEC,GAAO,CAClB,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IC8BaC,GAhEE,WAAO,IACdpL,EAAOH,IAAPG,GAEF8B,EAAOpD,mBAAQ,yBAAMsB,QAAN,IAAMA,OAAN,EAAMA,EAAI8B,OAAM,CAAC9B,IAEhCqL,EAAcvK,uBAAY,WAC9B,cAAIgB,QAAJ,IAAIA,OAAJ,EAAIA,EAAMC,SAASmJ,KAEf,eAAC,WAAD,WACE,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,GAAD,QAKN,OAAIpJ,QAAJ,IAAIA,OAAJ,EAAIA,EAAMC,SAASmJ,MACjB,OAAIpJ,QAAJ,IAAIA,OAAJ,EAAIA,EAAMC,SAASmJ,KAEf,eAAC,WAAD,WACE,cAACI,GAAD,IACA,cAAC,GAAD,IACA,cAAC,EAAD,OAMJ,eAAC,WAAD,WACE,cAAC,GAAD,IACA,cAAC,EAAD,QAKN,OAAIxJ,QAAJ,IAAIA,OAAJ,EAAIA,EAAMC,SAASmJ,KAEf,eAAC,WAAD,WACE,cAACI,GAAD,IACA,cAAC,GAAD,IACA,cAAC,EAAD,OAKC,OACN,CAACxJ,IAEJ,OACE,sBAAKvE,UAAU,YAAf,UACE,cAAC8N,EAAD,IACA,cAAC,GAAD,IAGA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAACE,GAAD,QC5CSC,GA/BI,SAAC,GAA8C,IAA5CzN,EAA2C,EAA3CA,MAAON,EAAoC,EAApCA,SAAUF,EAA0B,EAA1BA,UAAW4M,EAAe,EAAfA,SAAe,EACvB7L,mBAAS,QADc,mBACxDmN,EADwD,KAC1CC,EAD0C,KAc/D,OAJAtF,qBAAU,WACJrI,GAAO2N,EAAgB3N,KAC1B,CAACA,IAGF,yBACEN,SAbiB,SAAAG,GAAM,IACjBG,EAAUH,EAAEC,OAAZE,MAGR,OAFA2N,EAAgB3N,GAETN,EAASM,IAUdR,UAAWI,IAAWJ,EAAW,CAAEoO,MAAkC,IAA3BtD,SAASoD,KACnD1N,MAAO0N,EACPtB,SAAUA,EAJZ,UAME,wBAAQpM,MAAO,SACf,wBAAQA,MAAO,EAAf,0BACA,wBAAQA,MAAO,EAAf,eACA,wBAAQA,MAAO,EAAf,eACA,wBAAQA,MAAO,EAAf,eACA,wBAAQA,MAAO,EAAf,mBCsHS6N,GApIG,WAAO,IACf5L,EAAOH,IAAPG,GACAwB,EAAaW,IAAbX,SACAE,EAAayB,IAAbzB,SAHc,EAKUpD,oBAAS,GALnB,mBAKfuN,EALe,KAKLC,EALK,OAMIxN,mBAAS,MANb,mBAMfyN,EANe,KAMRC,EANQ,OAOU1N,mBAAS,IAPnB,mBAOfsD,EAPe,KAOLqK,EAPK,KAShBvM,EAAQwM,cAAc3N,OATN,EAUWG,mBAAQ,kBAAM4B,IAAY6L,MAAMzM,KAAQ,IAAjE2H,EAVc,EAUdA,MAAOG,EAVO,EAUPA,QAASC,EAVF,EAUEA,KAExBrB,qBAAU,WACHiB,GAAUG,GAAYC,EAGzBxI,IACGwK,IAAIhK,EAAYa,IAAYC,UAAU,CAAE8G,QAAOG,UAASC,SAAS,YACjErI,MAAK,YAAe,IAAZoB,EAAW,EAAXA,KACPwL,EAASxL,EAAK,IACdsL,GAAY,MAEbzM,OAAM,kBAAMyM,GAAY,MAR3BA,GAAY,KAUb,CAACzE,EAAOG,EAASC,IAEpBrB,qBAAU,WACJiB,GACFpI,IACGwK,IAAIhK,EAAYa,IAAYC,UAAU,CAAE8G,QAAO+E,UAAW,YAAc,WACxEhN,MAAK,gBAAGoB,EAAH,EAAGA,KAAH,OAAcyL,EAAYzL,QAEnC,CAAC6G,IAEJjB,qBAAU,WACJ2F,GAAO9M,IAAMyK,MAAMjK,EAAY,GAAI,mBAAasM,QAAb,IAAaA,OAAb,EAAaA,EAAOrL,KAAKqL,KAC/D,CAAClH,KAAKtE,UAAUwL,KAEnB,IAAM5D,EAAczJ,mBAAQ,+BAAM8C,QAAN,IAAMA,GAAN,UAAMA,EAAUuC,MAAK,qBAAGrD,MAAW,OAAKqL,QAAL,IAAKA,OAAL,EAAKA,EAAOvE,mBAA/C,aAAM,EAAmD1J,OAAM,CAAC0D,EAAUuK,IAEhGM,EAAiB3N,mBAAQ,yBAAMgD,QAAN,IAAMA,OAAN,EAAMA,EAAUqC,MAAK,qBAAGrD,MAAW,OAAKqL,QAAL,IAAKA,OAAL,EAAKA,EAAOzI,cAAU,CAACyI,EAAOrK,IAE1F4K,EAAkB5N,mBAAQ,WAC9B,SAAKqN,IAAU/L,QAEf,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAI8B,KAAKC,SAAS,gBAECwK,KAAd,OAALR,QAAK,IAALA,OAAA,EAAAA,EAAOzI,WAA8B,OAALyI,QAAK,IAALA,OAAA,EAAAA,EAAOzI,YAAP,OAAmBtD,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAIU,OAG1D,CAACV,EAAI+L,IAEFpF,EAAe7F,sBAAW,uCAC9B,WAAOuC,EAASmJ,EAAKC,GAArB,iBAAA1L,EAAA,yDACOgL,GAAUO,EADjB,oDAEe,SAATG,EAFN,yCAGWT,EAAS,2BACXD,GADU,IAEbW,MAAM,2BACDX,EAAMW,OADN,kBAEFF,EAFE,aAEQT,EAAMW,MAAMF,GAAK7N,QAAO,qBAAG0E,UAAuCA,YAPrF,OAYQsJ,EAAa,WACjBX,EAAS,2BACJD,GADG,IAENW,MAAM,2BACDX,EAAMW,OADN,kBAEFF,EAFE,uBAEQT,EAAMW,MAAMF,GAAK7N,QAAO,qBAAG0E,UAAuCA,MAF1E,CAEoF,CAAEA,UAASoJ,iBAKpG,UAACV,EAAMW,aAAP,aAAC,EAAcF,IASjBG,IARAX,EAAS,2BACJD,GADG,IAENW,MAAM,2BACDX,EAAMW,OADN,kBAEFF,EAAM,CAAC,CAAEnJ,UAASoJ,cA3B3B,2CAD8B,0DAmC9B,CAACV,EAAOO,IAGV,OAAIT,IAAaE,EAAc,4CAG7B,sBAAKxO,UAAU,aAAf,UACE,6BAAK,CAAC4K,EAAD,OAAckE,QAAd,IAAcA,OAAd,EAAcA,EAAgBvO,KAA9B,OAAoCuO,QAApC,IAAoCA,OAApC,EAAoCA,EAAgBjM,OAAOR,KAAK,SACrE,wBAAOrC,UAAU,QAAjB,UACE,uBAAOA,UAAU,aAAjB,SACE,+BACE,uGACC4N,GAAKpM,KAAI,SAAAyN,GAAG,OACX,6BAAwBA,GAAxB,cAAgBA,YAItB,uCACG5K,QADH,IACGA,OADH,EACGA,EAAU7C,KAAI,gBAAG2B,EAAH,EAAGA,GAAI5C,EAAP,EAAOA,KAAP,OACb,+BACE,oBAAIP,UAAU,uBAAd,SACE,qBAAKA,UAAU,6BAAf,SAA6CO,MAE9CqN,GAAKpM,KAAI,SAAAyN,GAAQ,IAAD,MACTC,EAAI,OAAGV,QAAH,IAAGA,GAAH,UAAGA,EAAOW,aAAV,iBAAG,EAAeF,UAAlB,iBAAG,EAAqBzI,MAAK,qBAAGV,UAA0B3C,YAA1D,aAAG,EAA4D+L,KAEzE,OACE,oBAAIlP,UAAU,uBAAd,SACE,cAAC,GAAD,CACE4M,UAAWmC,EACXvO,MAAO0O,EACPlP,UAAWI,IAAW,aAAc,cACpCF,SAAU,SAAAmP,GAAS,OAAIjG,EAAajG,EAAI8L,EAAKI,OALjD,UAA6ClM,EAA7C,gBAAuD8L,SARpD9L,eCrFNmM,GAjCG,WAAO,IACfzM,EAAUP,IAAVO,MADc,EAGU9B,mBAAS,IAHnB,mBAGfwO,EAHe,KAGLC,EAHK,OAIUzO,mBAAS,IAJnB,mBAIf+B,EAJe,KAIL2M,EAJK,KAMhBlI,EAAe,SAAAlH,GAAM,IAAD,EACAA,EAAEC,OAAlBE,EADgB,EAChBA,MAER,OAHwB,EACTD,MAGb,IAAK,WACH,OAAOiP,EAAYhP,GACrB,IAAK,WACH,OAAOiP,EAAYjP,KAUzB,OACE,uBAAMwG,SAPa,SAAA3G,GAGnB,OAFAA,EAAEoH,iBAEK5E,EAAM,CAAEA,MAAO0M,EAAUzM,cAIF9C,UAAU,YAAxC,UACE,4GACA,uBAAOQ,MAAO+O,EAAUhP,KAAK,WAAWmG,KAAK,OAAOoF,YAAY,yCAAgB5L,SAAUqH,IAC1F,uBAAO/G,MAAOsC,EAAUvC,KAAK,WAAWmG,KAAK,WAAWoF,YAAY,8CAAgB5L,SAAUqH,IAC9F,wBAAQb,KAAK,SAAb,gDCRSgJ,GAdA,WAAO,IACZpM,EAAchB,IAAdgB,UAIR,OAFAuF,qBAAU,kBAAMvF,MAAa,IAG3B,eAAC,IAAD,WACE,cAAC,IAAD,CAAOqM,OAAK,EAACC,KAAK,IAAIlI,UAAWmG,KACjC,cAAC,IAAD,CAAO8B,OAAK,EAACC,KAAK,SAASlI,UAAW2G,KACtC,cAAC,IAAD,CAAOsB,OAAK,EAACC,KAAK,SAASlI,UAAW4H,SCV/B9M,GAAcoB,wBAAc,MAkB1BiM,GAhBH,WAAO,IAAD,EACI9O,wBAASiO,GADb,mBACTvM,EADS,KACLC,EADK,KAGhB,OACE,cAAC,IAAD,UACE,cAACF,GAAYmC,SAAb,CAAsBnE,MAAO,CAAEiC,KAAIC,SAAnC,SACE,cAAC,EAAD,UACE,cAAC,EAAD,UACE,cAAC,GAAD,a,MCZZoN,IAASC,OAAO,cAAC,GAAD,IAAShH,SAASiH,eAAe,W","file":"static/js/main.123302b9.chunk.js","sourcesContent":["import React from 'react';\n\nimport Select from 'components/common/Select';\n\nconst options = [];\n\nfor (let i = 0; i < 10; i++) {\n  options.push({\n    label: (new Date().getFullYear() - i).toString(),\n    value: (new Date().getFullYear() - i).toString(),\n  });\n}\n\nconst YearSelect = props => <Select options={options} label=\"Год\" {...props} />;\n\nexport default YearSelect;\n","import React from 'react';\n\nconst HomeCard = ({ label, children }) => {\n  return (\n    <div className=\"home-card\">\n      <div className=\"home-header\">{label}</div>\n      <div className=\"home-content\">{children}</div>\n    </div>\n  );\n};\n\nexport default HomeCard;\n","import React from 'react';\nimport classnames from 'classnames';\n\nconst Input = ({ onChange, label, ...props }) => {\n  const handleChange = e => {\n    const { name, value } = e.target;\n\n    return onChange({ name, value });\n  };\n\n  return (\n    <div className={classnames('input', props.className)}>\n      {label && <div className=\"input-label\">{label}</div>}\n      <input {...props} className=\"input-field\" onChange={handleChange} />\n    </div>\n  );\n};\n\nexport default Input;\n","import React, { useState, useMemo } from 'react';\nimport axios from 'axios';\n\nimport Input from 'components/common/Input';\n\nconst MutableList = ({ items, onEdit, onAdd, collectionName, refetch }) => {\n  const [search, setSearch] = useState('');\n\n  const filteredItems = useMemo(() => items?.filter(({ label }) => new RegExp(search, 'gi').test(label)), [\n    search,\n    items,\n  ]);\n\n  const onDelete = (value, name) => {\n    const sure = confirm(`Вы действительно хотите удалить элемент ${name}?`);\n\n    if (!sure) return;\n\n    axios\n      .delete(`${process.env.REACT_APP_API_URL}/${collectionName}/${value}`)\n      .then(refetch)\n      .catch(err => alert(`Ошибка: ${err}`));\n  };\n\n  return (\n    <div className=\"mutable-list\">\n      <div className=\"mutable-list-header\">\n        <div className=\"search\">\n          <Input label=\"Поиск\" value={search} onChange={({ value }) => setSearch(value)} />\n        </div>\n        <button onClick={onAdd} className=\"create-item\">\n          Добавить элемент\n        </button>\n      </div>\n      {(search ? filteredItems : items)?.map(({ label, value }) => (\n        <div className=\"list-item\" key={`${label}-${value}`}>\n          <div className=\"item-name\">{label}</div>\n          <div className=\"item-actions\">\n            <button onClick={() => onEdit(value)} className=\"item-action edit-item\">\n              Изменить\n            </button>\n            <button onClick={() => onDelete(value, label)} className=\"item-action delete-item\">\n              &times;\n            </button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default MutableList;\n","const createQuery = (query, ...values) => {\n  return `${process.env.REACT_APP_API_URL}${values.join('')}${query ? '?' + query : ''}`;\n};\n\nexport default createQuery;\n","import { useContext, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport axios from 'axios';\nimport queryString from 'query-string';\n\nimport { UserContext } from 'App';\n\nimport createQuery from 'helpers/createQuery';\n\nconst useUser = () => {\n  const { me, setMe } = useContext(UserContext);\n\n  const { push } = useHistory();\n\n  const authorize = useCallback(async () => {\n    if (!localStorage?.getItem('token')) {\n      return push('/login');\n    }\n\n    const [id, password] = localStorage.getItem('token').split('::');\n\n    return await axios(createQuery(queryString.stringify({ id, password }), '/users')).then(({ data }) => {\n      const user = data?.[0];\n\n      if (!user) push('/login');\n\n      setMe(user);\n    });\n  }, []);\n\n  const login = ({ login, password }) => {\n    axios(createQuery(queryString.stringify({ login, password }), '/users')).then(({ data }) => {\n      const user = data?.[0];\n\n      if (user) {\n        const { id, password } = user;\n\n        localStorage.setItem('token', `${id}::${password}`);\n\n        push('/');\n\n        setMe(user);\n      } else {\n        alert('Неверный логин или пароль');\n      }\n    });\n  };\n\n  return {\n    me,\n    login,\n    authorize,\n  };\n};\n\nexport default useUser;\n","import React, { createContext } from 'react';\nimport useAxios from 'axios-hooks';\n\nimport useUser from 'hooks/useUser';\n\nexport const AxiosContext = createContext({});\n\nconst AxiosProvider = ({ children }) => {\n  const { me } = useUser();\n\n  const [{ data: groups }, refetchGroups] = useAxios(`${process.env.REACT_APP_API_URL}/groups?_sort=name&_order=asc`);\n  const [{ data: subjects }, refetchSubjects] = useAxios(\n    `${process.env.REACT_APP_API_URL}/subjects?_sort=name&_order_asc`,\n  );\n  const [{ data: teachers }, refetchTeachers] = useAxios(\n    `${process.env.REACT_APP_API_URL}/users?role_like=teacher&role_like=curator&_sort=name&_order=asc`,\n  );\n  const [{ data: students }, refetchStudents] = useAxios(\n    `${process.env.REACT_APP_API_URL}/users?role_like=student&_sort=name&_order=asc`,\n  );\n  const [{ data: sheets }, refetchSheets] = useAxios(\n    `${process.env.REACT_APP_API_URL}/sheets?_sort=date&_order=desc${\n      !me?.role?.includes('admin') ? `&teacher=${me?.id}` : ''\n    }`,\n  );\n\n  return (\n    <AxiosContext.Provider\n      value={{\n        groups,\n        refetchGroups,\n        subjects,\n        refetchSubjects,\n        teachers,\n        refetchTeachers,\n        students,\n        refetchStudents,\n        sheets,\n        refetchSheets,\n      }}\n    >\n      {children}\n    </AxiosContext.Provider>\n  );\n};\n\nexport default AxiosProvider;\n","import { useContext } from 'react';\n\nimport { AxiosContext } from 'providers/AxiosProvider';\n\nconst useSubjects = () => {\n  const { subjects, refetchSubjects } = useContext(AxiosContext);\n\n  return { subjects, refetchSubjects };\n};\n\nexport default useSubjects;\n","import React, { useState, createContext } from 'react';\n\nexport const ModalContext = createContext({});\n\nconst ModalProvider = ({ children }) => {\n  const [activeModal, setActiveModal] = useState(null);\n  const [context, setContext] = useState(null);\n\n  const openModal = modalName => setActiveModal(modalName);\n  const closeModal = () => setActiveModal(null);\n\n  return (\n    <ModalContext.Provider\n      value={{\n        activeModal,\n        openModal,\n        closeModal,\n        context,\n        setContext,\n      }}\n    >\n      {children}\n    </ModalContext.Provider>\n  );\n};\n\nexport default ModalProvider;\n","import { useContext } from 'react';\n\nimport { ModalContext } from 'providers/ModalProvider';\n\nconst useModal = modalName => {\n  const { activeModal, openModal = () => null, closeModal = () => null, context, setContext } = useContext(\n    ModalContext,\n  );\n\n  const open = (openContext = null) => {\n    openModal(modalName);\n    setContext(openContext);\n  };\n\n  const close = () => {\n    closeModal(modalName);\n    setContext(null);\n  };\n\n  return {\n    activeModal,\n    open,\n    close,\n    context: context || {},\n    setContext,\n  };\n};\n\nexport default useModal;\n","import React, { useMemo } from 'react';\n\nimport HomeCard from 'components/home/HomeCard';\nimport MutableList from 'components/common/MutableList';\n\nimport useSubjects from 'hooks/useSubjects';\nimport useModal from 'hooks/useModal';\n\nconst SubjectsCard = () => {\n  const { open } = useModal('CreateSubject');\n\n  const { subjects, refetchSubjects } = useSubjects();\n\n  const items = useMemo(() => subjects?.map(({ id, name }) => ({ label: name, value: id }), [subjects]));\n\n  const handleEdit = id => open({ id, label: 'Редактировать предмет' });\n  const handleAdd = () => open({ label: 'Добавить предмет' });\n\n  return (\n    <HomeCard label=\"Предметы\">\n      <MutableList\n        items={items}\n        collectionName=\"subjects\"\n        createModalName=\"CreateSubject\"\n        refetch={refetchSubjects}\n        onEdit={handleEdit}\n        onAdd={handleAdd}\n      />\n    </HomeCard>\n  );\n};\n\nexport default SubjectsCard;\n","import { useContext } from 'react';\n\nimport { AxiosContext } from 'providers/AxiosProvider';\n\nconst useTeachers = () => {\n  const { teachers, refetchTeachers } = useContext(AxiosContext);\n\n  return { teachers, refetchTeachers };\n};\n\nexport default useTeachers;\n","const rolesDictionary = {\n  student: 'Студент',\n  teacher: 'Преподаватель',\n  curator: 'Куратор',\n  admin: 'Администратор',\n};\n\nconst formatRole = role => rolesDictionary[role];\n\nexport const formatRoles = roles => roles.map(role => formatRole(role));\n\nexport default formatRole;\n","import React, { useMemo } from 'react';\n\nimport HomeCard from 'components/home/HomeCard';\nimport MutableList from 'components/common/MutableList';\n\nimport useTeachers from 'hooks/useTeachers';\nimport useModal from 'hooks/useModal';\n\nimport { formatRoles } from 'helpers/formatRole';\n\nconst TeachersCard = () => {\n  const { open } = useModal('CreateTeacher');\n\n  const { teachers, refetchTeachers } = useTeachers();\n\n  const items = useMemo(\n    () =>\n      teachers?.map(({ name, id, role }) => ({\n        label: `${name} (${formatRoles(role).join(', ')})`,\n        value: id,\n      })),\n    [teachers],\n  );\n\n  const handleEdit = id => open({ id, label: 'Редактировать сотрудника' });\n  const handleAdd = () => open({ label: 'Добавить сотрудника' });\n\n  return (\n    <HomeCard label=\"Преподаватели и кураторы\">\n      <MutableList\n        items={items}\n        collectionName=\"users\"\n        refetch={refetchTeachers}\n        onEdit={handleEdit}\n        onAdd={handleAdd}\n      />\n    </HomeCard>\n  );\n};\n\nexport default TeachersCard;\n","import { useContext } from 'react';\n\nimport { AxiosContext } from 'providers/AxiosProvider';\n\nconst useGroups = () => {\n  const { groups, refetchGroups } = useContext(AxiosContext);\n\n  return { groups, refetchGroups };\n};\n\nexport default useGroups;\n","import React, { useMemo } from 'react';\n\nimport HomeCard from 'components/home/HomeCard';\nimport MutableList from 'components/common/MutableList';\n\nimport useModal from 'hooks/useModal';\nimport useGroups from 'hooks/useGroups';\nimport useTeachers from 'hooks/useTeachers';\n\nconst GroupsCard = () => {\n  const { open } = useModal('CreateGroup');\n  const { groups, refetchGroups } = useGroups();\n  const { teachers } = useTeachers();\n\n  const items = useMemo(\n    () =>\n      groups?.map(({ name, id, curator }) => {\n        const curatorName = teachers?.find(({ id }) => id === curator)?.name;\n\n        const label = `${name} ${curatorName ? `(${curatorName})` : ''}`;\n        return { label, value: id };\n      }),\n    [groups, teachers],\n  );\n\n  const handleEdit = id => open({ id, label: 'Редактировать группу' });\n  const handleAdd = () => open({ label: 'Добавить группу' });\n\n  return (\n    <HomeCard label=\"Группы\">\n      <MutableList\n        items={items}\n        collectionName=\"groups\"\n        refetch={refetchGroups}\n        onEdit={handleEdit}\n        onAdd={handleAdd}\n      />\n    </HomeCard>\n  );\n};\n\nexport default GroupsCard;\n","const getDefaultValue = type => {\n  switch (type) {\n    case 'text':\n      return '';\n    case 'number':\n      return 0;\n    case 'multiselect':\n      return [];\n    default:\n      return null;\n  }\n};\n\nexport default getDefaultValue;\n","import React, { useState, useCallback, cloneElement } from 'react';\nimport classnames from 'classnames';\n\nimport useModal from 'hooks/useModal';\n\nimport getDefaultValue from 'helpers/getDefaultValue';\n\nconst Form = ({\n  fields,\n  cancel,\n  cancelLabel = 'Отмена',\n  submitLabel = 'Принять',\n  onSubmit,\n  actionClassName,\n  className,\n  initialValues,\n}) => {\n  const { close } = useModal();\n\n  const [form, setForm] = useState(initialValues || {});\n\n  const preventSubmit = e => e.preventDefault();\n\n  const handleSubmit = useCallback(() => onSubmit(form), [JSON.stringify(form)]);\n\n  const handleChange = useCallback(({ name, value }) => setForm(prev => ({ ...prev, [name]: value })), [\n    JSON.stringify(form),\n  ]);\n\n  return (\n    <form className={classnames('form', className)} onSubmit={preventSubmit}>\n      <div className=\"form-fields\">\n        {fields.map(({ name, component, type, required, condition = () => true }) =>\n          condition(form)\n            ? cloneElement(component, {\n                required,\n                name,\n                key: name,\n                onChange: handleChange,\n                value: form[name] || getDefaultValue(type),\n              })\n            : null,\n        )}\n      </div>\n      <div className={classnames('form-actions', actionClassName)}>\n        {cancel && (\n          <button onClick={close} className=\"form-action cancel\">\n            {cancelLabel}\n          </button>\n        )}\n        <button onClick={handleSubmit} className=\"form-action submit\">\n          {submitLabel}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","import React, { useState, useMemo, useRef, useCallback, useEffect } from 'react';\n\nconst Select = ({ options, onChange, onAdd, name, label, value, addLabel = 'Добавить элемент' }) => {\n  const [open, setOpen] = useState(false);\n\n  const selectRef = useRef(null);\n\n  const activeOptionValue = useMemo(() => (value ? value : options?.[0]?.value), [value]);\n\n  const activeOptionLabel = useMemo(\n    () => options?.find(({ value: optionValue }) => activeOptionValue === optionValue)?.label,\n    [value],\n  );\n\n  const isUnderneath = false;\n\n  const handleBlur = useCallback(\n    e => {\n      const { classList } = e.target;\n\n      if (!open && classList.contains('select-option')) return;\n\n      return handleClose();\n    },\n    [open],\n  );\n\n  const handleClose = () => setOpen(false);\n\n  const toggle = useCallback(() => setOpen(value => !value), []);\n\n  const handleSelect = value => onChange({ value, name });\n\n  useEffect(() => {\n    onChange({ value: activeOptionValue, name });\n  }, [activeOptionValue]);\n\n  const handleAdd = () => {\n    handleClose();\n    onAdd();\n  };\n\n  useEffect(() => setOpen(false), [activeOptionValue]);\n\n  useEffect(() => {\n    const deselect = document.addEventListener('mousedown', handleBlur);\n\n    return document.removeEventListener('mousedown', deselect);\n  }, []);\n\n  return (\n    <div ref={selectRef} className=\"custom-select-container\">\n      <button className=\"custom-select\" name={name} onClick={toggle}>\n        <div className=\"select-label\">{label}</div>\n        <div className=\"select-value\">{activeOptionLabel}</div>\n      </button>\n      {open && (\n        <div className={`select-options ${isUnderneath ? 'select-option-bottom' : 'select-option-top'}`}>\n          {onAdd && (\n            <div role=\"button\" onMouseDown={handleAdd} className=\"select-option\">\n              {addLabel} +\n            </div>\n          )}\n          {options?.map(({ label, value }) => (\n            <div\n              role=\"button\"\n              key={`${label}-${value}`}\n              className=\"select-option\"\n              onMouseDown={() => handleSelect(value)}\n            >\n              {label}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Select;\n","import React, { useMemo } from 'react';\n\nimport Select from 'components/common/Select';\n\nimport useModal from 'hooks/useModal';\nimport useGroups from 'hooks/useGroups';\n\nconst GroupSelect = props => {\n  const { open } = useModal('CreateGroup');\n\n  const { groups } = useGroups();\n\n  const options = useMemo(\n    () =>\n      groups?.map(({ id, name }) => ({\n        label: name,\n        value: id,\n      })),\n    [groups],\n  );\n\n  if (!options) return null;\n\n  return (\n    <Select\n      options={options}\n      label=\"Группа\"\n      addLabel=\"Добавить группу\"\n      onAdd={() => open({ label: 'Добавить группу' })}\n      {...props}\n    />\n  );\n};\n\nexport default GroupSelect;\n","import React, { useMemo } from 'react';\n\nimport Select from 'components/common/Select';\n\nimport useModal from 'hooks/useModal';\nimport useSubjects from 'hooks/useSubjects';\n\nconst SubjectSelect = props => {\n  const { open } = useModal('CreateSubject');\n\n  const { subjects } = useSubjects();\n\n  const options = useMemo(\n    () =>\n      subjects?.map(({ id, name }) => ({\n        label: name,\n        value: id,\n      })),\n    [subjects],\n  );\n\n  if (!options) return null;\n\n  return (\n    <Select\n      options={options}\n      label=\"Дисциплина\"\n      addLabel=\"Добавить дисциплину\"\n      onAdd={() => open({ label: 'Добавить дисциплину' })}\n      {...props}\n    />\n  );\n};\n\nexport default SubjectSelect;\n","import React from 'react';\n\nimport Select from 'components/common/Select';\n\nconst options = [\n  {\n    label: 'Январь',\n    value: '1',\n  },\n  {\n    label: 'Февраль',\n    value: '2',\n  },\n  {\n    label: 'Март',\n    value: '3',\n  },\n  {\n    label: 'Апрель',\n    value: '4',\n  },\n  {\n    label: 'Май',\n    value: '5',\n  },\n  {\n    label: 'Июнь',\n    value: '6',\n  },\n  {\n    label: 'Июль',\n    value: '7',\n  },\n  {\n    label: 'Август',\n    value: '8',\n  },\n  {\n    label: 'Сентябрь',\n    value: '9',\n  },\n  {\n    label: 'Октябрь',\n    value: '10',\n  },\n  {\n    label: 'Ноябрь',\n    value: '11',\n  },\n  {\n    label: 'Декабрь',\n    value: '12',\n  },\n];\n\nconst MonthSelect = props => <Select options={options} label=\"Месяц\" {...props} />;\n\nexport default MonthSelect;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport queryString from 'query-string';\n\nimport HomeCard from 'components/home/HomeCard';\nimport Form from 'components/common/Form';\nimport GroupSelect from 'components/group/GroupSelect';\nimport SubjectSelect from 'components/subject/SubjectSelect';\nimport MonthSelect from 'components/common/MonthSelect';\nimport YearSelect from 'components/common/YearSelect';\n\nconst fields = [\n  {\n    name: 'group',\n    component: <GroupSelect />,\n  },\n  {\n    name: 'subject',\n    component: <SubjectSelect />,\n  },\n  {\n    name: 'month',\n    component: <MonthSelect />,\n  },\n  {\n    name: 'year',\n    component: <YearSelect />,\n  },\n];\n\nconst JournalCard = () => {\n  const { push } = useHistory();\n\n  const handleSubmit = value => {\n    const { group, year, month, subject } = value || {};\n    const date = `${year}-${month}`;\n\n    push('/sheet?' + queryString.stringify({ group, date, subject }));\n  };\n\n  return (\n    <HomeCard label=\"Оценки\">\n      <Form fields={fields} onSubmit={handleSubmit} />\n    </HomeCard>\n  );\n};\n\nexport default JournalCard;\n","import { useContext } from 'react';\n\nimport { AxiosContext } from 'providers/AxiosProvider';\n\nconst useStudents = () => {\n  const { students, refetchStudents } = useContext(AxiosContext);\n\n  return { students, refetchStudents };\n};\n\nexport default useStudents;\n","import React, { useMemo } from 'react';\n\nimport HomeCard from 'components/home/HomeCard';\nimport MutableList from 'components/common/MutableList';\n\nimport useStudents from 'hooks/useStudents';\nimport useGroups from 'hooks/useGroups';\nimport useModal from 'hooks/useModal';\n\nconst getGroupsNames = (initialGroups, groupIds) => {\n  const filtered = initialGroups.filter(({ id: groupId }) => {\n    return groupIds?.includes(groupId);\n  });\n  const mapped = filtered.map(({ name }) => name);\n\n  return mapped.join(', ');\n};\n\nconst StudentsCard = () => {\n  const { open } = useModal('CreateStudent');\n\n  const { students, refetchStudents } = useStudents();\n  const { groups } = useGroups();\n\n  const items = useMemo(\n    () =>\n      students?.map(({ name, id, group: groupId }) => {\n        const groupNames = getGroupsNames(groups, [groupId]);\n        return {\n          label: `${name} ${groupNames.length ? `(${groupNames})` : ''}`,\n          value: id,\n        };\n      }),\n    [students],\n  );\n\n  const handleEdit = id => open({ id, label: 'Редактировать студента' });\n  const handleAdd = () => open({ label: 'Добавить студента' });\n\n  return (\n    <HomeCard label=\"Студенты\">\n      <MutableList\n        items={items}\n        collectionName=\"users\"\n        refetch={refetchStudents}\n        onEdit={handleEdit}\n        onAdd={handleAdd}\n      />\n    </HomeCard>\n  );\n};\n\nexport default StudentsCard;\n","import { useContext } from 'react';\n\nimport { AxiosContext } from 'providers/AxiosProvider';\n\nconst useSheets = () => {\n  const { sheets, refetchSheets } = useContext(AxiosContext);\n\n  return { sheets, refetchSheets };\n};\n\nexport default useSheets;\n","const getMonth = value => {\n  switch (value) {\n    case 1:\n      return 'Январь';\n    case 2:\n      return 'Февраль';\n    case 3:\n      return 'Март';\n    case 4:\n      return 'Апрель';\n    case 5:\n      return 'Май';\n    case 6:\n      return 'Июнь';\n    case 7:\n      return 'Июль';\n    case 8:\n      return 'Август';\n    case 9:\n      return 'Сентябрь';\n    case 10:\n      return 'Октябрь';\n    case 11:\n      return 'Ноябрь';\n    case 12:\n      return 'Декабрь';\n  }\n};\n\nexport default getMonth;\n","import React, { useMemo } from 'react';\n\nimport HomeCard from 'components/home/HomeCard';\nimport MutableList from 'components/common/MutableList';\n\nimport useSheets from 'hooks/useSheets';\nimport useGroups from 'hooks/useGroups';\nimport useSubjects from 'hooks/useSubjects';\nimport useModal from 'hooks/useModal';\n\nimport getMonth from 'helpers/getMonth';\n\nconst StudentsCard = () => {\n  const { open } = useModal('CreateSheet');\n\n  const { sheets, refetchSheets } = useSheets();\n  const { groups } = useGroups();\n  const { subjects } = useSubjects();\n\n  const items = useMemo(\n    () =>\n      sheets?.map(({ id, group, date, subject }) => {\n        const groupName = groups?.find(({ id: groupId }) => group === groupId)?.name;\n        const subjectName = subjects?.find(({ id: subjectId }) => subject === subjectId)?.name;\n        const year = date.split('-')[0];\n        const month = getMonth(parseInt(date?.split('-')[1]));\n\n        const label = [month, year, subjectName, groupName].join(' ');\n\n        return {\n          label,\n          value: id,\n        };\n      }),\n    [groups, subjects, sheets],\n  );\n\n  const handleEdit = id => open({ id, label: 'Редактировать страницу' });\n  const handleAdd = () => open({ label: 'Добавить страницу' });\n\n  return (\n    <HomeCard label=\"Страницы журнала\">\n      <MutableList\n        items={items}\n        collectionName=\"sheets\"\n        refetch={refetchSheets}\n        onEdit={handleEdit}\n        onAdd={handleAdd}\n      />\n    </HomeCard>\n  );\n};\n\nexport default StudentsCard;\n","import React, { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport classnames from 'classnames';\n\nimport useModal from 'hooks/useModal';\n\nconst Modal = ({ name, center, label, className, children }) => {\n  const { activeModal, close } = useModal(name);\n\n  const handleClick = e => {\n    const { classList } = e.target;\n\n    if (classList.contains('modal')) return close();\n  };\n\n  const handleKeyDown = ({ key }) => {\n    if (key === 'Escape') return close();\n  };\n\n  useEffect(() => {\n    const clickEvent = document.addEventListener('mousedown', handleClick);\n    const keyDownEvent = document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('mousedown', clickEvent);\n      document.removeEventListener('mousedown', keyDownEvent);\n    };\n  }, []);\n\n  if (activeModal !== name) return null;\n\n  return (\n    <div className={classnames('modal', { center: Boolean(center) })}>\n      <div className={classnames('modal-content', className)}>\n        <div className=\"modal-header\">\n          <h6 className=\"modal-label\">{label}</h6>\n          <button onClick={close} className=\"modal-close\">\n            &times;\n          </button>\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nconst ModalContainer = props => createPortal(<Modal {...props}>{props.children}</Modal>, document.body);\n\nexport default ModalContainer;\n","const genId = prefix => `${prefix}_${Math.random().toString(36).substr(2, 9)}`;\n\nexport default genId;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport queryString from 'query-string';\n\nimport Modal from 'components/common/Modal';\nimport Form from 'components/common/Form';\nimport Input from 'components/common/Input';\n\nimport useModal from 'hooks/useModal';\nimport useSubjects from 'hooks/useSubjects';\n\nimport createQuery from 'helpers/createQuery';\nimport genId from 'helpers/genId';\n\nconst fields = [\n  {\n    type: 'text',\n    name: 'name',\n    component: <Input type=\"text\" placeholder=\"Основы некоторой деятельности ...\" />,\n  },\n];\n\nconst CreateSubject = () => {\n  const { close, context } = useModal();\n\n  const { refetchSubjects } = useSubjects();\n\n  const [initialValues, setInitialValues] = useState(null);\n\n  const fetchGroup = () => {\n    return axios\n      .get(createQuery(queryString.stringify({ id: context.id }), '/subjects'))\n      .then(({ data }) => setInitialValues(data?.[0]));\n  };\n\n  const handleSubmit = values => {\n    if (context?.id) {\n      return axios.patch(createQuery('', `/subjects/${context.id}`), values).then(() => {\n        close();\n        fetchGroup();\n        refetchSubjects();\n      });\n    }\n\n    return axios.post(createQuery('', '/subjects'), { id: genId('sb'), ...values }).then(() => {\n      close();\n      refetchSubjects();\n    });\n  };\n\n  useEffect(() => {\n    if (context?.id) {\n      fetchGroup();\n    } else {\n      setInitialValues(null);\n    }\n  }, [context?.id]);\n\n  if (context?.id && !initialValues) return null;\n\n  return (\n    <Modal className=\"create-subject\" name=\"CreateSubject\" label={context.label}>\n      <Form initialValues={initialValues} fields={fields} onSubmit={handleSubmit} />\n    </Modal>\n  );\n};\n\nexport default CreateSubject;\n","import React, { useMemo, useCallback } from 'react';\nimport classnames from 'classnames';\n\nconst MultiSelect = ({ value, options, limit, name, label, onChange }) => {\n  const selectedOptions = useMemo(() => options.filter(({ value: optionValue }) => value.includes(optionValue)), [\n    value,\n  ]);\n\n  const handleSelect = useCallback(\n    inputValue => {\n      let newSelected = [...value];\n\n      if (value.includes(inputValue)) {\n        newSelected.splice(value.indexOf(inputValue), 1);\n      } else {\n        newSelected.push(inputValue);\n      }\n\n      onChange({\n        name,\n        value: newSelected,\n      });\n    },\n    [value],\n  );\n\n  return (\n    <div className=\"multi-select\">\n      {label && <label className=\"multi-select-label\">{label}</label>}\n      <div className=\"multi-select-active\">\n        {selectedOptions.map(({ label, value }) => (\n          <button key={label} onClick={() => handleSelect(value)} className=\"multi-select-active-item\">\n            {label}\n          </button>\n        ))}\n      </div>\n      <div className=\"multi-select-options\">\n        {options.map(({ label, value }) => (\n          <button\n            key={`${label}-${value}`}\n            onClick={() => handleSelect(value)}\n            disabled={\n              selectedOptions.length >= limit &&\n              !selectedOptions.some(({ value: optionValue }) => value === optionValue)\n            }\n            className={classnames('select-option', {\n              active: selectedOptions.some(({ value: optionValue }) => value === optionValue),\n            })}\n          >\n            {label}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default MultiSelect;\n","import React, { useMemo } from 'react';\n\nimport MultiSelect from 'components/common/MultiSelect';\n\nimport useSubjects from 'hooks/useSubjects';\n\nconst SubjectMultiSelect = ({ name, value, onChange, limit }) => {\n  const { subjects } = useSubjects();\n\n  const options = useMemo(() => subjects.map(({ id, name }) => ({ label: name, value: id })), [subjects]);\n\n  return <MultiSelect limit={limit} name={name} options={options} label=\"Предметы\" onChange={onChange} value={value} />;\n};\n\nexport default SubjectMultiSelect;\n","import React, { useMemo } from 'react';\n\nimport Select from 'components/common/Select';\n\nimport useTeachers from 'hooks/useTeachers';\nimport useModal from 'hooks/useModal';\n\nconst TeacherSelect = ({ name, value, role, label, onChange }) => {\n  const { open } = useModal('CreateTeacher');\n\n  const { teachers } = useTeachers();\n\n  const options = useMemo(() => {\n    const filtered = teachers?.filter(({ role: teacherRole }) => {\n      switch (role) {\n        case 'teacher':\n          return teacherRole.includes('teacher');\n        case 'curator':\n          return teacherRole.includes('curator');\n        default:\n          return true;\n      }\n    });\n\n    return filtered?.map(({ id, name }) => ({ label: name, value: id }));\n  }, [teachers]);\n\n  return (\n    <Select\n      label={label}\n      options={options}\n      value={value}\n      name={name}\n      onChange={onChange}\n      onAdd={() => open({ label: 'Добавить сотрудника' })}\n    />\n  );\n};\n\nexport default TeacherSelect;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport queryString from 'query-string';\n\nimport Modal from 'components/common/Modal';\nimport Form from 'components/common/Form';\nimport Input from 'components/common/Input';\nimport SubjectMultiSelect from 'components/subject/SubjectMultiSelect';\nimport TeacherSelect from 'components/teacher/TeacherSelect';\n\nimport useModal from 'hooks/useModal';\nimport useGroups from 'hooks/useGroups';\n\nimport createQuery from 'helpers/createQuery';\nimport genId from 'helpers/genId';\n\nconst fields = [\n  {\n    type: 'text',\n    name: 'name',\n    component: <Input type=\"text\" placeholder=\"ПОКС-11\" />,\n  },\n  {\n    type: 'multiselect',\n    name: 'subjects',\n    component: <SubjectMultiSelect limit={10} />,\n  },\n  {\n    name: 'curator',\n    component: <TeacherSelect label=\"Куратор\" role=\"curator\" />,\n  },\n];\n\nconst CreateGroup = () => {\n  const { close, context } = useModal();\n\n  const { refetchGroups } = useGroups();\n\n  const [initialValues, setInitialValues] = useState(null);\n\n  const fetchGroup = () => {\n    return axios\n      .get(createQuery(queryString.stringify({ id: context.id }), '/groups'))\n      .then(({ data }) => setInitialValues(data?.[0]));\n  };\n\n  const handleSubmit = values => {\n    if (context?.id) {\n      return axios.patch(createQuery('', `/groups/${context.id}`), values).then(() => {\n        close();\n        fetchGroup();\n        refetchGroups();\n      });\n    }\n\n    return axios.post(createQuery('', '/groups'), { id: genId('gr'), ...values }).then(() => {\n      close();\n      refetchGroups();\n    });\n  };\n\n  useEffect(() => {\n    if (context.id) {\n      fetchGroup();\n    } else {\n      setInitialValues(null);\n    }\n  }, [context?.id]);\n\n  if (context?.id && !initialValues) return null;\n\n  return (\n    <Modal className=\"create-group\" name=\"CreateGroup\" label={context.label}>\n      <Form initialValues={initialValues} fields={fields} onSubmit={handleSubmit} />\n    </Modal>\n  );\n};\n\nexport default CreateGroup;\n","import React from 'react';\n\nimport MultiSelect from 'components/common/MultiSelect';\n\nimport formatRole from 'helpers/formatRole';\n\nconst options = [\n  {\n    label: formatRole('teacher'),\n    value: 'teacher',\n  },\n  {\n    label: formatRole('curator'),\n    value: 'curator',\n  },\n];\n\nconst RoleMultiSelect = ({ name, value, onChange, limit }) => (\n  <MultiSelect name={name} options={options} limit={limit} label=\"Роль\" onChange={onChange} value={value} />\n);\n\nexport default RoleMultiSelect;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport queryString from 'query-string';\n\nimport Modal from 'components/common/Modal';\nimport Form from 'components/common/Form';\nimport Input from 'components/common/Input';\nimport RoleMultiSelect from 'components/teacher/RoleMultiSelect';\nimport SubjectMultiSelect from 'components/subject/SubjectMultiSelect';\n\nimport useModal from 'hooks/useModal';\nimport useTeachers from 'hooks/useTeachers';\nimport useGroups from 'hooks/useGroups';\n\nimport createQuery from 'helpers/createQuery';\nimport genId from 'helpers/genId';\n\nconst fields = [\n  {\n    type: 'text',\n    name: 'name',\n    component: <Input label=\"ФИО\" type=\"text\" placeholder=\"Иванов Иван Иванович\" />,\n  },\n  {\n    type: 'text',\n    name: 'login',\n    component: <Input label=\"Электронная почта\" type=\"email\" />,\n  },\n  {\n    type: 'text',\n    name: 'password',\n    component: <Input label=\"Пароль\" type=\"password\" />,\n  },\n  {\n    type: 'multiselect',\n    name: 'role',\n    component: <RoleMultiSelect limit={2} label=\"Преподаватель\" />,\n  },\n  {\n    type: 'multiselect',\n    name: 'subjects',\n    component: <SubjectMultiSelect limit={3} label=\"Предметы\" />,\n    condition: form => form['role']?.includes('teacher'),\n  },\n];\n\nconst CreateTeacher = () => {\n  const { close, context } = useModal();\n\n  const { refetchTeachers } = useTeachers();\n  const { refetchGroups } = useGroups();\n\n  const [initialValues, setInitialValues] = useState(null);\n\n  const fetchTeacher = () => {\n    return axios\n      .get(createQuery(queryString.stringify({ id: context.id }), '/users'))\n      .then(({ data }) => setInitialValues(data?.[0]));\n  };\n\n  const handleSubmit = values => {\n    if (context?.id) {\n      return axios.patch(createQuery('', `/users/${context.id}`), values).then(() => {\n        close();\n        fetchTeacher();\n        refetchTeachers();\n        refetchGroups();\n      });\n    }\n\n    return axios.post(createQuery('', '/users'), { id: genId('tc'), ...values }).then(() => {\n      close();\n      refetchTeachers();\n    });\n  };\n\n  useEffect(() => {\n    if (context.id) {\n      fetchTeacher();\n    } else {\n      setInitialValues(null);\n    }\n  }, [context?.id]);\n\n  if (context?.id && !initialValues) return null;\n\n  return (\n    <Modal className=\"create-teacher\" name=\"CreateTeacher\" label={context.label}>\n      <Form initialValues={initialValues} fields={fields} onSubmit={handleSubmit} />\n    </Modal>\n  );\n};\n\nexport default CreateTeacher;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport queryString from 'query-string';\n\nimport Modal from 'components/common/Modal';\nimport Form from 'components/common/Form';\nimport Input from 'components/common/Input';\nimport GroupSelect from 'components/group/GroupSelect';\n\nimport useModal from 'hooks/useModal';\nimport useGroups from 'hooks/useGroups';\nimport useStudents from 'hooks/useStudents';\n\nimport createQuery from 'helpers/createQuery';\nimport genId from 'helpers/genId';\n\nconst fields = [\n  {\n    type: 'text',\n    name: 'name',\n    component: <Input label=\"ФИО\" type=\"text\" placeholder=\"Иванов Иван Иванович\" />,\n  },\n  {\n    type: 'text',\n    name: 'group',\n    component: <GroupSelect label=\"Группа\" />,\n  },\n];\n\nconst CreateStudent = () => {\n  const { close, context } = useModal();\n  const { refetchGroups } = useGroups();\n  const { refetchStudents } = useStudents();\n\n  const [initialValues, setInitialValues] = useState(null);\n\n  const fetchStudent = () => {\n    return axios\n      .get(createQuery(queryString.stringify({ id: context.id }), '/users'))\n      .then(({ data }) => setInitialValues(data?.[0]));\n  };\n\n  const handleSubmit = values => {\n    if (context?.id) {\n      return axios.patch(createQuery('', `/users/${context.id}`), values).then(() => {\n        close();\n        fetchStudent();\n        refetchGroups();\n        refetchStudents();\n      });\n    }\n\n    return axios.post(createQuery('', '/users'), { id: genId('st'), role: ['student'], ...values }).then(() => {\n      close();\n      refetchStudents();\n    });\n  };\n\n  useEffect(() => {\n    if (context.id) {\n      fetchStudent();\n    } else {\n      setInitialValues(null);\n    }\n  }, [context?.id]);\n\n  if (context?.id && !initialValues) return null;\n\n  return (\n    <Modal className=\"create-student\" name=\"CreateStudent\" label={context.label}>\n      <Form initialValues={initialValues} fields={fields} onSubmit={handleSubmit} />\n    </Modal>\n  );\n};\n\nexport default CreateStudent;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport queryString from 'query-string';\n\nimport Modal from 'components/common/Modal';\nimport Form from 'components/common/Form';\nimport Input from 'components/common/Input';\nimport GroupSelect from 'components/group/GroupSelect';\nimport SubjectSelect from 'components/subject/SubjectSelect';\n\nimport useUser from 'hooks/useUser';\nimport useModal from 'hooks/useModal';\nimport useSheets from 'hooks/useSheets';\n\nimport createQuery from 'helpers/createQuery';\nimport genId from 'helpers/genId';\n\nconst fields = [\n  {\n    type: 'text',\n    name: 'date',\n    component: <Input label=\"Дата (год-месяц)\" type=\"text\" placeholder=\"2020-11\" />,\n  },\n  {\n    type: 'text',\n    name: 'group',\n    component: <GroupSelect label=\"Группа\" />,\n  },\n  {\n    type: 'text',\n    name: 'subject',\n    component: <SubjectSelect label=\"Предмет\" />,\n  },\n];\n\nconst CreateStudent = () => {\n  const { me } = useUser();\n  const { close, context } = useModal();\n  const { refetchSheets } = useSheets();\n\n  const [initialValues, setInitialValues] = useState(null);\n\n  const fetchSheet = () => {\n    return axios\n      .get(createQuery(queryString.stringify({ id: context.id }), '/sheets'))\n      .then(({ data }) => setInitialValues(data?.[0]));\n  };\n\n  const handleSubmit = useCallback(\n    values => {\n      if (!me) return;\n      if (context?.id) {\n        return axios.patch(createQuery('', `/sheets/${context.id}`), values).then(() => {\n          close();\n          fetchSheet();\n          refetchSheets();\n        });\n      }\n\n      return axios.post(createQuery('', '/sheets'), { id: genId('sh'), teacher: me?.id, ...values }).then(() => {\n        close();\n        refetchSheets();\n      });\n    },\n    [me],\n  );\n\n  useEffect(() => {\n    if (context.id) {\n      fetchSheet();\n    } else {\n      setInitialValues(null);\n    }\n  }, [context?.id]);\n\n  if (context?.id && !initialValues) return null;\n\n  return (\n    <Modal className=\"create-sheet\" name=\"CreateSheet\" label={context.label}>\n      <Form initialValues={initialValues} fields={fields} onSubmit={handleSubmit} />\n    </Modal>\n  );\n};\n\nexport default CreateStudent;\n","export const MarksEnum = {\n  Absent: 0,\n  Two: 1,\n  Three: 2,\n  Four: 3,\n  Five: 4,\n};\n\nexport const Marks = {\n  [MarksEnum.Absent]: null,\n  [MarksEnum.Two]: 2,\n  [MarksEnum.Three]: 3,\n  [MarksEnum.Four]: 4,\n  [MarksEnum.Five]: 5,\n};\n\nexport const RolesEnum = {\n  Admin: 'admin',\n  Curator: 'curator',\n  Teacher: 'teacher',\n  Student: 'student',\n};\n\nexport const DAYS = [\n  1,\n  2,\n  3,\n  4,\n  5,\n  6,\n  7,\n  8,\n  9,\n  10,\n  11,\n  12,\n  13,\n  14,\n  15,\n  16,\n  17,\n  18,\n  19,\n  20,\n  21,\n  22,\n  23,\n  24,\n  25,\n  26,\n  27,\n  28,\n  29,\n  30,\n  31,\n];\n","import React, { Fragment, useCallback, useMemo } from 'react';\n\nimport SubjectsCard from 'components/subject/SubjectsCard';\nimport TeachersCard from 'components/teacher/TeachersCard';\nimport GroupsCard from 'components/group/GroupsCard';\nimport JournalCard from 'components/sheet/JournalCard';\n// import AbsenceCard from 'components/home/AbsenceCard';\nimport StudentsCard from 'components/student/StudentsCard';\nimport SheetsCard from 'components/sheet/SheetsCard';\n\nimport CreateSubject from 'components/subject/CreateSubject';\nimport CreateGroup from 'components/group/CreateGroup';\nimport CreateTeacher from 'components/teacher/CreateTeacher';\nimport CreateStudent from 'components/student/CreateStudent';\nimport CreateSheet from 'components/sheet/CreateSheet';\n\nimport useUser from 'hooks/useUser';\n\nimport { RolesEnum } from 'helpers/constants';\n\nconst HomePage = () => {\n  const { me } = useUser();\n\n  const role = useMemo(() => me?.role, [me]);\n\n  const CardsToShow = useCallback(() => {\n    if (role?.includes(RolesEnum.Admin)) {\n      return (\n        <Fragment>\n          <SubjectsCard />\n          <TeachersCard />\n          <GroupsCard />\n          <StudentsCard />\n        </Fragment>\n      );\n    }\n\n    if (role?.includes(RolesEnum.Curator)) {\n      if (role?.includes(RolesEnum.Teacher)) {\n        return (\n          <Fragment>\n            <SheetsCard />\n            <StudentsCard />\n            <GroupsCard />\n          </Fragment>\n        );\n      }\n\n      return (\n        <Fragment>\n          <StudentsCard />\n          <GroupsCard />\n        </Fragment>\n      );\n    }\n\n    if (role?.includes(RolesEnum.Teacher)) {\n      return (\n        <Fragment>\n          <SheetsCard />\n          <StudentsCard />\n          <GroupsCard />\n        </Fragment>\n      );\n    }\n\n    return null;\n  }, [role]);\n\n  return (\n    <div className=\"page home\">\n      <CardsToShow />\n      <JournalCard />\n      {/* <AbsenceCard /> */}\n\n      <CreateSubject />\n      <CreateTeacher />\n      <CreateStudent />\n      <CreateGroup />\n      <CreateSheet />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React, { useState, useEffect } from 'react';\n\nimport classnames from 'classnames';\n\nconst MarkSelect = ({ value, onChange, className, disabled }) => {\n  const [selectedMark, setSelectedMark] = useState('none');\n\n  const handleSelect = e => {\n    const { value } = e.target;\n    setSelectedMark(value);\n\n    return onChange(value);\n  };\n\n  useEffect(() => {\n    if (value) setSelectedMark(value);\n  }, [value]);\n\n  return (\n    <select\n      onChange={handleSelect}\n      className={classnames(className, { error: parseInt(selectedMark) === 0 })}\n      value={selectedMark}\n      disabled={disabled}\n    >\n      <option value={'none'}></option>\n      <option value={0}>нб</option>\n      <option value={2}>2</option>\n      <option value={3}>3</option>\n      <option value={4}>4</option>\n      <option value={5}>5</option>\n    </select>\n  );\n};\n\nexport default MarkSelect;\n","import React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport axios from 'axios';\nimport queryString from 'query-string';\nimport classnames from 'classnames';\n\nimport MarkSelect from 'components/sheet/MarkSelect';\n\nimport useUser from 'hooks/useUser';\nimport useSubjects from 'hooks/useSubjects';\nimport useTeachers from 'hooks/useTeachers';\n\nimport createQuery from 'helpers/createQuery';\nimport { DAYS } from 'helpers/constants';\n\nconst SheetPage = () => {\n  const { me } = useUser();\n  const { subjects } = useSubjects();\n  const { teachers } = useTeachers();\n\n  const [notFound, setNotFound] = useState(false);\n  const [sheet, setSheet] = useState(null);\n  const [students, setStudents] = useState([]);\n\n  const query = useLocation().search;\n  const { group, subject, date } = useMemo(() => queryString.parse(query), []);\n\n  useEffect(() => {\n    if (!group || !subject || !date) {\n      setNotFound(true);\n    } else {\n      axios\n        .get(createQuery(queryString.stringify({ group, subject, date }), '/sheets'))\n        .then(({ data }) => {\n          setSheet(data[0]);\n          setNotFound(false);\n        })\n        .catch(() => setNotFound(true));\n    }\n  }, [group, subject, date]);\n\n  useEffect(() => {\n    if (group) {\n      axios\n        .get(createQuery(queryString.stringify({ group, role_like: 'student' }), '/users'))\n        .then(({ data }) => setStudents(data));\n    }\n  }, [group]);\n\n  useEffect(() => {\n    if (sheet) axios.patch(createQuery('', '/sheets/' + sheet?.id), sheet);\n  }, [JSON.stringify(sheet)]);\n\n  const subjectName = useMemo(() => subjects?.find(({ id }) => id === sheet?.subject)?.name, [subjects, sheet]);\n\n  const currentTeacher = useMemo(() => teachers?.find(({ id }) => id === sheet?.teacher), [sheet, teachers]);\n\n  const mutationAllowed = useMemo(() => {\n    if (!sheet && !me) return false;\n\n    if (me?.role.includes('admin')) return true;\n\n    if (sheet?.teacher !== undefined && sheet?.teacher === me?.id) return true;\n\n    return false;\n  }, [me, sheet]);\n\n  const handleSelect = useCallback(\n    async (student, day, mark) => {\n      if (!sheet || !mutationAllowed) return;\n      if (mark === 'none') {\n        return setSheet({\n          ...sheet,\n          marks: {\n            ...sheet.marks,\n            [day]: [...sheet.marks[day].filter(({ student: studentId }) => studentId !== student)],\n          },\n        });\n      }\n\n      const mutateMark = () => {\n        setSheet({\n          ...sheet,\n          marks: {\n            ...sheet.marks,\n            [day]: [...sheet.marks[day].filter(({ student: studentId }) => studentId !== student), { student, mark }],\n          },\n        });\n      };\n\n      if (!sheet.marks?.[day]) {\n        setSheet({\n          ...sheet,\n          marks: {\n            ...sheet.marks,\n            [day]: [{ student, mark }],\n          },\n        });\n      } else {\n        mutateMark();\n      }\n    },\n    [sheet, mutationAllowed],\n  );\n\n  if (notFound || !sheet) return <div>Not found</div>;\n\n  return (\n    <div className=\"page sheet\">\n      <h3>{[subjectName, currentTeacher?.name, currentTeacher?.login].join(' | ')}</h3>\n      <table className=\"table\">\n        <thead className=\"table-head\">\n          <tr>\n            <th>Студент / День</th>\n            {DAYS.map(day => (\n              <th key={`day-${day}`}>{day}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {students?.map(({ id, name }) => (\n            <tr key={id}>\n              <td className=\"table-cell-container\">\n                <div className=\"table-cell table-cell-name\">{name}</div>\n              </td>\n              {DAYS.map(day => {\n                const mark = sheet?.marks?.[day]?.find(({ student }) => student === id)?.mark;\n\n                return (\n                  <td className=\"table-cell-container\" key={`${id}-day-${day}`}>\n                    <MarkSelect\n                      disabled={!mutationAllowed}\n                      value={mark}\n                      className={classnames('table-cell', 'table-mark')}\n                      onChange={markValue => handleSelect(id, day, markValue)}\n                    />\n                  </td>\n                );\n              })}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default SheetPage;\n","import React, { useState } from 'react';\n\nimport useUser from 'hooks/useUser';\n\nconst LoginPage = () => {\n  const { login } = useUser();\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleChange = e => {\n    const { value, name } = e.target;\n\n    switch (name) {\n      case 'username':\n        return setUsername(value);\n      case 'password':\n        return setPassword(value);\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    return login({ login: username, password });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"form-home\">\n      <h4>Вход в систему</h4>\n      <input value={username} name=\"username\" type=\"text\" placeholder=\"Логин - admin\" onChange={handleChange} />\n      <input value={password} name=\"password\" type=\"password\" placeholder=\"Пароль - 1234\" onChange={handleChange} />\n      <button type=\"submit\">Войти</button>\n    </form>\n  );\n};\n\nexport default LoginPage;\n","import React, { useEffect } from 'react';\n\nimport { Switch, Route } from 'react-router-dom';\n\nimport HomePage from 'pages/private/HomePage';\nimport SheetPage from 'pages/public/SheetPage';\nimport LoginPage from 'pages/public/LoginPage';\n\nimport useUser from 'hooks/useUser';\n\nconst Routes = () => {\n  const { authorize } = useUser();\n\n  useEffect(() => authorize(), []);\n\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={HomePage} />\n      <Route exact path=\"/sheet\" component={SheetPage} />\n      <Route exact path=\"/login\" component={LoginPage} />\n    </Switch>\n  );\n};\n\nexport default Routes;\n","import React, { useState, createContext } from 'react';\n\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport Routes from 'Routes';\n\nimport ModalProvider from 'providers/ModalProvider';\nimport AxiosProvider from 'providers/AxiosProvider';\n\nexport const UserContext = createContext(null);\n\nconst App = () => {\n  const [me, setMe] = useState(undefined);\n\n  return (\n    <Router>\n      <UserContext.Provider value={{ me, setMe }}>\n        <AxiosProvider>\n          <ModalProvider>\n            <Routes />\n          </ModalProvider>\n        </AxiosProvider>\n      </UserContext.Provider>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from 'App';\n\nimport 'styles/index.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}